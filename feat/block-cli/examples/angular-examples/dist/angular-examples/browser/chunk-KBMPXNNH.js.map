{"version":3,"sources":["node_modules/@siemens/ix/dist/esm/theme-switcher-DRqJGlG2.js"],"sourcesContent":["import { T as TypedEvent } from './typed-event-BdCnOrqW.js';\n\n/*\n * SPDX-FileCopyrightText: 2025 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst dataIxTheme = 'data-ix-theme';\nconst dataIxColorSchema = 'data-ix-color-schema';\nclass ThemeSwitcher {\n  get themeChanged() {\n    return this._themeChanged;\n  }\n  get schemaChanged() {\n    return this._schemaChanged;\n  }\n  hasVariantSuffix(className) {\n    return className.endsWith(this.suffixDark) || className.endsWith(this.suffixLight);\n  }\n  isThemeClass(className) {\n    return className.startsWith(this.prefixTheme) && this.hasVariantSuffix(className);\n  }\n  setTheme(themeName, systemAppearance = false) {\n    if (this.isThemeClass(themeName)) {\n      this.replaceThemeClass(themeName);\n    } else {\n      document.documentElement.setAttribute(dataIxTheme, themeName);\n    }\n    if (systemAppearance) {\n      const currentSystemAppearance = getCurrentSystemAppearance();\n      this.setVariant(currentSystemAppearance);\n    }\n  }\n  replaceThemeClass(themeName) {\n    const oldThemes = [];\n    Array.from(document.documentElement.classList).filter(className => className && this.isThemeClass(className)).forEach(className => {\n      oldThemes.push(className);\n    });\n    document.documentElement.classList.remove(...oldThemes);\n    document.documentElement.classList.add(themeName);\n  }\n  toggleMode() {\n    if (document.documentElement.hasAttribute(dataIxColorSchema)) {\n      const currentSchema = this.getDataColorSchema(document.documentElement);\n      document.documentElement.setAttribute(dataIxColorSchema, currentSchema === 'dark' ? 'light' : 'dark');\n      return;\n    }\n    const oldThemes = [];\n    Array.from(document.documentElement.classList).filter(className => className && this.isThemeClass(className)).forEach(className => {\n      oldThemes.push(className);\n    });\n    if (oldThemes.length === 0) {\n      document.documentElement.classList.add(this.getOppositeMode(this.defaultTheme));\n      return;\n    }\n    oldThemes.forEach(themeName => {\n      document.documentElement.classList.replace(themeName, this.getOppositeMode(themeName));\n    });\n  }\n  getDataColorSchema(target) {\n    return target.getAttribute(dataIxColorSchema);\n  }\n  getCurrentTheme() {\n    var _a;\n    return (_a = Array.from(document.documentElement.classList).find(className => this.isThemeClass(className))) !== null && _a !== void 0 ? _a : `theme-${document.documentElement.getAttribute(dataIxTheme) || 'classic'}-${document.documentElement.getAttribute(dataIxColorSchema) || getCurrentSystemAppearance()}`;\n  }\n  setVariant(variant = getCurrentSystemAppearance()) {\n    if (this.getDataColorSchema(document.documentElement)) {\n      document.documentElement.setAttribute(dataIxColorSchema, variant);\n      return;\n    }\n    const currentTheme = this.getCurrentTheme();\n    document.documentElement.classList.remove(currentTheme);\n    if (currentTheme.endsWith(this.suffixDark)) {\n      document.documentElement.classList.add(currentTheme.replace(/-dark$/g, `-${variant}`));\n    }\n    if (currentTheme.endsWith(this.suffixLight)) {\n      document.documentElement.classList.add(currentTheme.replace(/-light$/g, `-${variant}`));\n    }\n    document.documentElement.setAttribute(dataIxColorSchema, variant);\n  }\n  getOppositeMode(themeName) {\n    if (themeName.endsWith(this.suffixDark)) {\n      return themeName.replace(/-dark$/g, this.suffixLight);\n    }\n    if (themeName.endsWith(this.suffixLight)) {\n      return themeName.replace(/-light$/g, this.suffixDark);\n    }\n    return '';\n  }\n  splitMutations(mutations) {\n    const classMutations = mutations.filter(mutation => mutation.attributeName === 'class');\n    const dataMutations = mutations.filter(mutation => mutation.attributeName === dataIxTheme || mutation.attributeName === dataIxColorSchema);\n    return {\n      classMutations,\n      dataMutations\n    };\n  }\n  handleClassMutations(mutations) {\n    return mutations.forEach(mutation => {\n      const {\n        target\n      } = mutation;\n      target.classList.forEach(className => {\n        var _a;\n        if (this.isThemeClass(className) && !((_a = mutation.oldValue) === null || _a === void 0 ? void 0 : _a.includes(className))) {\n          this._themeChanged.emit(className);\n        }\n      });\n    });\n  }\n  handleDataMutations(mutations) {\n    return mutations.forEach(mutation => {\n      const {\n        target\n      } = mutation;\n      const theme = target.attributes.getNamedItem(dataIxTheme);\n      if ((theme === null || theme === void 0 ? void 0 : theme.value) && mutation.oldValue !== theme.value) {\n        this._themeChanged.emit(theme.value);\n      }\n      const colorSchema = target.attributes.getNamedItem(dataIxColorSchema);\n      if ((colorSchema === null || colorSchema === void 0 ? void 0 : colorSchema.value) && mutation.oldValue !== colorSchema.value) {\n        this._schemaChanged.emit(colorSchema.value);\n      }\n    });\n  }\n  registerMutationObservers() {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    if (!('MutationObserver' in window)) {\n      console.warn('ThemeSwitcher not supported by your browser. Missing MutationObserver API');\n      return;\n    }\n    const mutationObserverConfig = {\n      attributeFilter: ['class', dataIxTheme, dataIxColorSchema],\n      attributeOldValue: true\n    };\n    const handleMutations = mutations => {\n      const {\n        classMutations,\n        dataMutations\n      } = this.splitMutations(mutations);\n      this.handleClassMutations(classMutations);\n      this.handleDataMutations(dataMutations);\n    };\n    this.mutationObserver = new MutationObserver(handleMutations);\n    this.mutationObserver.observe(document.documentElement, mutationObserverConfig);\n  }\n  constructor() {\n    this.prefixTheme = 'theme-';\n    this.suffixLight = '-light';\n    this.suffixDark = '-dark';\n    this.defaultTheme = 'theme-classic-dark';\n    this._themeChanged = new TypedEvent();\n    this._schemaChanged = new TypedEvent();\n    this.registerMutationObservers();\n  }\n}\nconst getCurrentSystemAppearance = () => {\n  const matchMedia = window.matchMedia('(prefers-color-scheme: dark)');\n  if (matchMedia.matches) {\n    return 'dark';\n  }\n  return 'light';\n};\nconst themeSwitcher = new ThemeSwitcher();\nexport { getCurrentSystemAppearance as g, themeSwitcher as t };\n\n\n"],"mappings":"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","names":["dataIxTheme","dataIxColorSchema","ThemeSwitcher","className","themeName","systemAppearance","currentSystemAppearance","getCurrentSystemAppearance","oldThemes","currentSchema","target","_a","variant","currentTheme","mutations","classMutations","mutation","dataMutations","theme","colorSchema","mutationObserverConfig","handleMutations","TypedEvent","themeSwitcher"],"x_google_ignoreList":[0]}