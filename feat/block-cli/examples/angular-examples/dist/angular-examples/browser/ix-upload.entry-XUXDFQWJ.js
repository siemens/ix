import{a as r}from"./chunk-34RBC7SZ.js";import{R as h,z as d}from"./chunk-NEUIV72S.js";import{c}from"./chunk-QAU7FEDV.js";import{a as p,d as t,e as f,f as u,g as b}from"./chunk-3Q7G4VVL.js";import{f as n}from"./chunk-IXF2NW34.js";var m=":host{display:block;min-height:4rem;height:4rem}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}@-moz-document url-prefix(){:host *{scrollbar-color:var(--theme-scrollbar-thumb--background) var(--theme-scrollbar-track--background);scrollbar-width:thin}}:host{}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host{}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host{}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host{}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}:host .file-upload-area{display:flex;flex-direction:row;align-items:center;justify-content:space-between;overflow:hidden;height:100%;width:100%;padding:1rem;border:1px dashed var(--theme-upload--border-color);border-radius:var(--theme-upload--border-radius);color:var(--theme-upload-text--color)}:host .file-upload-area.multiline{max-height:unset;height:auto}:host .file-upload-area.multiline .glyph{align-self:flex-start;margin-block-start:3px}:host .file-upload-area.multiline>div{align-self:flex-start}:host .file-upload-area:not(.multiline) .state,:host .file-upload-area:not(.multiline) .upload-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .file-upload-area:not(.disabled).file-over{border-color:var(--theme-upload--border-color--dragover);border-style:solid}:host .file-upload-area.checking{color:var(--theme-upload-text--color--checking);border-style:solid}:host .file-upload-area.disabled{border-style:solid;color:var(--theme-upload-text--color--disabled)}:host .file-upload-area ix-button{margin-inline-start:1rem}:host .file-upload-area .upload-browser{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}:host .file-upload-area .loader{margin:2.187rem auto;font-size:0.937rem;width:1rem;height:1rem;border-radius:50%;position:relative;text-indent:-9999em;animation:optimise-loading 1.1s infinite ease;transform:translateZ(0)}:host .file-upload-area .upload-filename{margin-bottom:1rem}:host .file-upload-area .state{display:flex;align-items:center}:host .file-upload-area .state>ix-spinner{margin-inline-end:0.5rem}:host .file-upload-area .state>ix-icon{margin-inline-end:0.5rem}:host .file-upload-area .state>ix-icon.icon-error{color:var(--theme-color-alarm)}:host .file-upload-area .state>ix-icon.icon-success{color:var(--theme-color-success)}:host(.disabled){pointer-events:none}",g=function(s,e){var a={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(a[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(s);l<i.length;l++)e.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(s,i[l])&&(a[i[l]]=s[i[l]]);return a},w=(()=>{let s=class{get inputElement(){return this.hostElement.shadowRoot.querySelector("#upload-browser")}constructor(e){p(this,e),this.filesChanged=b(this,"filesChanged",7),this.multiple=!1,this.multiline=!1,this.disabled=!1,this.state=r.SELECT_FILE,this.selectFileText="+ Drag files here or\u2026",this.loadingText="Checking files\u2026",this.uploadFailedText="Upload failed. Please try again.",this.uploadSuccessText="Upload successful",this.i18nUploadFile="Upload file\u2026",this.i18nUploadDisabled="File upload currently not possible.",this.isFileOver=!1,this.a11y={}}componentWillLoad(){this.a11y=c(this.hostElement)}fileDropped(e){if(e.preventDefault(),this.disabled||!e.dataTransfer)return;let a=e.dataTransfer.files;this.isFileOver=!1,this.filesToUpload=this.convertToFileArray(a),this.filesChanged.emit(this.filesToUpload)}fileOver(e){e.dataTransfer&&(this.state!==r.LOADING&&(e.preventDefault(),e.dataTransfer.dropEffect="move"),!this.multiple&&e.dataTransfer.items.length>1?(e.preventDefault(),e.stopPropagation(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none"):this.isFileOver=!0)}fileLeave(){this.isFileOver=!1}fileChangeEvent(e){this.disabled||e.target&&(this.filesToUpload=this.convertToFileArray(e.target.files),this.filesChanged.emit(this.filesToUpload),this.inputElement.type="",this.inputElement.type="file")}convertToFileArray(e){let a=[];return e?(e instanceof FileList?a=Array.from(e):a=[e],a):[]}renderUploadState(){if(this.disabled)return t("span",{class:"state"},t("span",{class:"upload-text"},this.i18nUploadDisabled));switch(this.state){case r.SELECT_FILE:return t("span",{class:"state"},t("span",{class:"upload-text"},this.selectFileText));case r.LOADING:return t("span",{class:"state"},t("ix-spinner",{variant:"primary"}),t("span",{class:"upload-text"},this.loadingText));case r.UPLOAD_FAILED:return t("span",{class:"state"},t("ix-icon",{name:d,class:"icon-error"}),t("span",{class:"upload-text"},this.uploadFailedText));case r.UPLOAD_SUCCESSED:return t("span",{class:"state"},t("ix-icon",{name:h,class:"icon-success"}),t("span",{class:"upload-text"},this.uploadSuccessText));default:return""}}setFilesToUpload(e){return n(this,null,function*(){this.filesToUpload=e})}render(){let e=this.disabled||this.state===r.LOADING,a=this.a11y,{"aria-label":i="Upload files"}=a,l=g(a,["aria-label"]);return t(f,Object.assign({key:"86f46021d8411ed37c036ac8844709bf4f18a8e1"},l,{"aria-disabled":e}),t("div",{key:"4e812c550b74d3ff2efee94408391ab34f2e958a",class:{"file-upload-area":!0,"file-over":this.state!==r.LOADING&&this.isFileOver,checking:this.state===r.LOADING,disabled:this.disabled,multiline:this.multiline},onDrop:o=>{this.state!==r.LOADING&&this.fileDropped(o)},onDragOver:o=>this.fileOver(o),onDragLeave:()=>this.fileLeave(),draggable:!this.disabled},this.renderUploadState(),t("div",{key:"043f4ce74e0da5da6ff7146ea959f5e4abbbaf42"},t("input",{key:"7781d5dfb001d09f876886c62670ad851684f8e4","aria-label":i,"aria-disabled":e,multiple:this.multiple,type:"file",class:"upload-browser",id:"upload-browser",tabindex:"-1",onChange:o=>{this.fileChangeEvent(o)},accept:this.accept,disabled:e}),t("ix-button",{key:"b2b896877fae3370cae656923413947618fbb037",variant:"secondary","aria-disabled":e,onClick:()=>this.inputElement.click(),disabled:e},this.i18nUploadFile))))}get hostElement(){return u(this)}};return s.style=m,s})();export{w as ix_upload};
//# sourceMappingURL=ix-upload.entry-XUXDFQWJ.js.map
