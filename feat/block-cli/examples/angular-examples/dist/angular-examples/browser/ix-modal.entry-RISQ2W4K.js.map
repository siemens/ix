{"version":3,"sources":["node_modules/@siemens/ix/dist/esm/ix-modal.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-CtoreFVF.js';\nimport { a as animate } from './anime.esm-DhE1t8Qh.js';\nimport { b as a11yHostAttributes, a as a11yBoolean } from './a11y-DAzBNVe7.js';\nimport { A as Animation } from './animation-C5MWUgDN.js';\nimport { O as OnListener } from './listener-DAJkOQte.js';\n\n/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nfunction waitForElement(selector, doc, timeout = 3000) {\n  return new Promise((resolve, reject) => {\n    const startTime = Date.now();\n    const checkIfElementExist = () => {\n      const dialog = doc.querySelector(selector);\n      if (dialog) {\n        resolve(dialog);\n      } else {\n        if (Date.now() - startTime < timeout) {\n          setTimeout(checkIfElementExist);\n        } else {\n          reject();\n        }\n      }\n    };\n    checkIfElementExist();\n  });\n}\nconst modalCss = \"::backdrop{background:var(--theme-color-lightbox, rgba(0, 0, 0, 0.5490196078))}:focus-visible{outline:none !important}:host{display:none}:host dialog{--ix-dialog-padding:1rem;margin:0;padding:var(--ix-dialog-padding);padding-top:calc(var(--ix-dialog-padding) + var(--ix-safe-area-inset-top));padding-bottom:calc(var(--ix-dialog-padding) + var(--ix-safe-area-inset-bottom));left:50%}:host .modal{display:flex;flex-direction:column;position:fixed;border:none;border-radius:var(--theme-default-border-radius);background:var(--theme-modal--background);box-shadow:var(--theme-shadow-4);color:var(--theme-color-std-text);overflow:visible;max-height:80vh;pointer-events:all;overflow-wrap:break-word}:host .modal-size-360{width:22.5rem}:host .modal-size-480{width:30rem}:host .modal-size-600{width:37.5rem}:host .modal-size-720{width:45rem}:host .modal-size-840{width:52.5rem}:host .modal-size-full-width{width:95%}:host .modal-size-full-screen{border-radius:0;left:0 !important;top:0 !important;transform:none !important;box-shadow:none;--ix-dialog-full-screen-height:calc(\\n    var(--ix-safe-area-inset-top) + var(--ix-safe-area-inset-bottom)\\n  );width:calc(100% - var(--ix-dialog-padding) * 2);min-width:calc(100% - var(--ix-dialog-padding) * 2);max-width:calc(100% - var(--ix-dialog-padding) * 2);min-height:calc(100% - var(--ix-dialog-padding) * 2 - var(--ix-dialog-full-screen-height));max-height:calc(100% - var(--ix-dialog-padding) * 2 - var(--ix-dialog-full-screen-height))}:host dialog.modal-size-full-screen::backdrop{background:var(--theme-modal--background)}:host .dialog-backdrop{display:block;position:fixed;width:100vw;height:100vh;top:0;left:0;pointer-events:none}:host ::slotted(ix-modal-footer){margin-top:auto}:host(.visible){display:block}:host(.align-center) dialog{margin:0;left:50%;top:50%}:host(.no-backdrop) dialog::backdrop{background-color:transparent !important;-webkit-backdrop-filter:none !important;backdrop-filter:none !important}:host(.with-icon) ::slotted(ix-modal-footer),:host(.with-icon) ::slotted(ix-modal-content){margin-left:3rem}\";\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst Modal = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.dialogClose = createEvent(this, \"dialogClose\", 7);\n    this.dialogDismiss = createEvent(this, \"dialogDismiss\", 7);\n    this.ariaAttributes = {};\n    this.isMouseDownInsideDialog = false;\n    /**\n     * Modal size\n     */\n    this.size = '360';\n    /**\n     * Should the modal animation be disabled\n     */\n    this.disableAnimation = false;\n    /**\n     * Hide the backdrop behind the modal dialog\n     */\n    this.hideBackdrop = false;\n    /**\n     * Dismiss modal on backdrop click\n     */\n    this.closeOnBackdropClick = false;\n    /**\n     * Centered modal\n     */\n    this.centered = false;\n    /**\n     * If set to true the modal cannot be closed by pressing the Escape key\n     */\n    this.disableEscapeClose = false;\n    this.modalVisible = false;\n  }\n  onKey(e) {\n    if (e.key === 'Escape') {\n      e.preventDefault();\n    }\n  }\n  get dialog() {\n    return this.hostElement.shadowRoot.querySelector('dialog');\n  }\n  slideInModal() {\n    const duration = this.disableAnimation ? 0 : Animation.mediumTime;\n    const translateY = this.centered ? ['-90%', '-50%'] : [0, 40];\n    animate(this.dialog, {\n      duration,\n      opacity: [0, 1],\n      translateY,\n      translateX: ['-50%', '-50%'],\n      easing: 'easeOutSine'\n    });\n  }\n  slideOutModal(completeCallback) {\n    const duration = this.disableAnimation ? 0 : Animation.mediumTime;\n    const translateY = this.centered ? ['-50%', '-90%'] : [40, 0];\n    animate(this.dialog, {\n      duration,\n      opacity: [1, 0],\n      translateY,\n      translateX: ['-50%', '-50%'],\n      easing: 'easeInSine',\n      complete: () => {\n        if (completeCallback) {\n          completeCallback();\n        }\n      }\n    });\n  }\n  onMouseDown(event) {\n    this.isMouseDownInsideDialog = this.isPointInsideDialog(event.clientX, event.clientY);\n  }\n  onMouseUp(event) {\n    const isMouseUpInsideDialog = this.isPointInsideDialog(event.clientX, event.clientY);\n    if (this.closeOnBackdropClick && !this.isMouseDownInsideDialog && !isMouseUpInsideDialog) {\n      this.dismissModal();\n    }\n  }\n  isPointInsideDialog(x, y) {\n    const rect = this.dialog.getBoundingClientRect();\n    return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n  }\n  /**\n   * Show the dialog\n   */\n  async showModal() {\n    try {\n      const dialog = await waitForElement('dialog', this.hostElement.shadowRoot);\n      this.modalVisible = true;\n      dialog.showModal();\n      this.slideInModal();\n    } catch (e) {\n      console.error('HTMLDialogElement not existing');\n    }\n  }\n  /**\n   * Dismiss the dialog\n   */\n  async dismissModal(reason) {\n    if (!this.modalVisible) {\n      return;\n    }\n    let allowDismiss = true;\n    if (this.beforeDismiss !== undefined) {\n      allowDismiss = await this.beforeDismiss(reason);\n    }\n    if (!allowDismiss) {\n      return;\n    }\n    this.slideOutModal(() => {\n      this.modalVisible = false;\n      this.dialog.close(JSON.stringify({\n        type: 'dismiss',\n        reason\n      }, null, 2));\n      this.dialogDismiss.emit(reason);\n    });\n  }\n  /**\n   * Close the dialog\n   */\n  async closeModal(reason) {\n    if (!this.modalVisible) {\n      return;\n    }\n    this.slideOutModal(() => {\n      this.modalVisible = false;\n      this.dialog.close(JSON.stringify({\n        type: 'close',\n        reason\n      }, null, 2));\n      this.dialogClose.emit(reason);\n    });\n  }\n  componentWillLoad() {\n    this.ariaAttributes = a11yHostAttributes(this.hostElement);\n  }\n  render() {\n    return h(Host, {\n      key: 'd5bb63f7716950339e3ab3be9cdf6e4bd914e958',\n      class: {\n        visible: this.modalVisible,\n        'no-backdrop': this.hideBackdrop,\n        'align-center': this.centered\n      }\n    }, h(\"div\", {\n      key: 'ce234129ecd33f05b4049a90633dabc590244178',\n      class: \"dialog-backdrop\"\n    }, h(\"dialog\", {\n      key: '65700de4d4e4e440ed81bdab67e9c54641aac02e',\n      \"aria-modal\": a11yBoolean(true),\n      \"aria-describedby\": this.ariaAttributes['aria-describedby'],\n      \"aria-labelledby\": this.ariaAttributes['aria-labelledby'],\n      class: {\n        modal: true,\n        [`modal-size-${this.size}`]: true\n      },\n      onClose: () => this.dismissModal(),\n      onMouseDown: event => this.onMouseDown(event),\n      onMouseUp: event => this.onMouseUp(event),\n      onCancel: e => {\n        e.preventDefault();\n        this.dismissModal();\n      }\n    }, h(\"slot\", {\n      key: '7a4bdf139d88ba4342d2cd6a2867683081c8f9e5'\n    }))));\n  }\n  get hostElement() {\n    return getElement(this);\n  }\n};\n__decorate([OnListener('keydown', self => self.disableEscapeClose)], Modal.prototype, \"onKey\", null);\nModal.style = modalCss;\nexport { Modal as ix_modal };\n"],"mappings":"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","names":["waitForElement","selector","doc","timeout","resolve","reject","startTime","checkIfElementExist","dialog","modalCss","__decorate","decorators","target","key","desc","c","r","d","i","Modal","hostRef","registerInstance","createEvent","e","duration","Animation","translateY","animate","completeCallback","event","isMouseUpInsideDialog","x","y","rect","__async","reason","allowDismiss","a11yHostAttributes","h","Host","a11yBoolean","getElement","OnListener","self"],"x_google_ignoreList":[0]}