{"version":3,"sources":["node_modules/@siemens/ix/dist/esm/input.fc-CPEIRuou.js"],"sourcesContent":["import { h } from './index-CtoreFVF.js';\nimport { a as a11yBoolean } from './a11y-DAzBNVe7.js';\nimport { s as shouldSuppressInternalValidation } from './validation-3877QBzA.js';\nimport { c as createMutationObserver } from './mutation-observer-CX81WQtk.js';\nimport { c as convertToRemString } from './rwd.util-pXYAoEyc.js';\nimport { a as animate } from './anime.esm-DhE1t8Qh.js';\nimport { A as Animation } from './animation-C5MWUgDN.js';\n\n/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nfunction shakeInput(input) {\n  const xMax = 5;\n  animate(input, {\n    duration: Animation.defaultTime,\n    easing: 'easeInOutSine',\n    loop: 2,\n    translateX: [{\n      value: xMax * -1\n    }, {\n      value: xMax\n    }, {\n      value: xMax / -2\n    }, {\n      value: xMax / 2\n    }, {\n      value: 0\n    }]\n  });\n}\n\n/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nfunction mapValidationResult(ref, result) {\n  ref.isInvalid = result.isInvalid || result.isInvalidByRequired;\n  ref.isValid = result.isValid;\n  ref.isInfo = result.isInfo;\n  ref.isWarning = result.isWarning;\n}\nfunction checkAllowedKeys(comp, event) {\n  if (comp.allowedCharactersPattern) {\n    const regex = new RegExp(comp.allowedCharactersPattern);\n    if (!regex.test(event.key)) {\n      event.preventDefault();\n      shakeInput(comp.inputRef.current);\n    }\n  }\n}\nasync function checkInternalValidity(comp, input) {\n  const validityState = input.validity;\n  const currentValidityState = !comp.hostElement.classList.contains('ix-invalid--validity-invalid');\n  const newValidityState = validityState.valid;\n  if (currentValidityState !== newValidityState) {\n    const eventResult = comp.validityStateChange.emit(validityState);\n    if (eventResult.defaultPrevented) {\n      return;\n    }\n    comp.hostElement.classList.toggle('ix-invalid--validity-invalid', !newValidityState);\n  }\n  if (comp.value === null || comp.value === undefined) {\n    return;\n  }\n  const skipValidation = await shouldSuppressInternalValidation(comp);\n  if (skipValidation) {\n    return;\n  }\n  const {\n    valid\n  } = validityState;\n  comp.hostElement.classList.toggle('ix-invalid--validity-invalid', !valid);\n}\nfunction onInputBlur(comp, input) {\n  comp.ixBlur.emit();\n  if (!input) {\n    throw new Error('Input element is not available');\n  }\n  input.setAttribute('data-ix-touched', 'true');\n  checkInternalValidity(comp, input);\n}\nfunction applyPaddingEnd(inputElement, width, options) {\n  var _a;\n  if (!inputElement) {\n    return;\n  }\n  const remInPixels = 16;\n  const padding = convertToRemString(width + remInPixels / 2);\n  if (options.slotEnd) {\n    inputElement.style.paddingRight = `calc(${padding} + ${(_a = options.additionalPaddingRight) !== null && _a !== void 0 ? _a : '0rem'})`;\n  } else {\n    inputElement.style.paddingLeft = padding;\n  }\n}\nfunction adjustPaddingForStartAndEnd(startElement, endElement, inputElement) {\n  requestAnimationFrame(() => {\n    requestAnimationFrame(() => {\n      if (startElement) {\n        const startBoundingRect = startElement.getBoundingClientRect();\n        if (startBoundingRect) {\n          applyPaddingEnd(inputElement, startBoundingRect.width, {\n            slotEnd: false\n          });\n        }\n      }\n      if (endElement) {\n        const endBoundingRect = endElement.getBoundingClientRect();\n        if (endBoundingRect) {\n          applyPaddingEnd(inputElement, endBoundingRect.width, {\n            slotEnd: true\n          });\n        }\n      }\n    });\n  });\n}\nfunction getAriaAttributesForInput(component) {\n  const inputAria = {\n    'aria-invalid': `${a11yBoolean(component.isInvalid)}`,\n    'aria-required': `${a11yBoolean(component.required)}`\n  };\n  if (component.isInvalid && component.invalidText) {\n    inputAria['aria-errormessage'] = component.invalidText;\n  }\n  return inputAria;\n}\nconst addDisposableChangesAndVisibilityObservers = (element, callback) => {\n  const intersectionObserver = observeElementUntilVisible(element, callback);\n  const mutationObserver = createMutationObserver(callback);\n  mutationObserver.observe(element, {\n    subtree: true,\n    attributes: true\n  });\n  return () => {\n    intersectionObserver.disconnect();\n    mutationObserver.disconnect();\n  };\n};\nfunction observeElementUntilVisible(hostElement, updateCallback) {\n  const intersectionObserver = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        updateCallback();\n      }\n    });\n  });\n  intersectionObserver.observe(hostElement);\n  return intersectionObserver;\n}\nfunction handleSubmitOnEnterKeydown(event, suppressSubmitOnEnter, form) {\n  if (suppressSubmitOnEnter || event.key !== 'Enter' || !form) {\n    return;\n  }\n  event.preventDefault();\n  const submitButton = form.querySelector('button[type=\"submit\"], ix-button[type=\"submit\"]');\n  if (submitButton) {\n    form.requestSubmit(submitButton);\n  }\n  if (form.length === 1) {\n    form.requestSubmit();\n  }\n}\nfunction createPickerValidityStateTracker() {\n  return {\n    lastEmittedPatternMismatch: false,\n    lastEmittedValueMissing: false\n  };\n}\nfunction emitPickerValidityState(component) {\n  return emitPickerValidityStateChangeIfChanged(component.validityTracker, {\n    touched: component.touched,\n    invalidReason: component.invalidReason,\n    getValidityState: () => component.getValidityState(),\n    emit: state => component.validityStateChange.emit(state)\n  });\n}\nasync function emitPickerValidityStateChangeIfChanged(tracker, context) {\n  if (!context.touched) {\n    return;\n  }\n  const state = await context.getValidityState();\n  const currentPatternMismatch = state.patternMismatch;\n  const currentValueMissing = state.valueMissing;\n  if (tracker.lastEmittedPatternMismatch === currentPatternMismatch && tracker.lastEmittedValueMissing === currentValueMissing) {\n    return;\n  }\n  tracker.lastEmittedPatternMismatch = currentPatternMismatch;\n  tracker.lastEmittedValueMissing = currentValueMissing;\n  context.emit({\n    patternMismatch: currentPatternMismatch,\n    valueMissing: currentValueMissing,\n    invalidReason: context.invalidReason\n  });\n}\n\n/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nfunction TextareaElement(props) {\n  return h(\"textarea\", Object.assign({\n    readOnly: props.readonly,\n    disabled: props.disabled,\n    maxLength: props.maxLength,\n    minLength: props.minLength,\n    cols: props.textareaCols,\n    rows: props.textareaRows,\n    ref: props.textAreaRef,\n    class: {\n      'is-invalid': props.isInvalid\n    },\n    required: props.required,\n    value: props.value,\n    placeholder: props.placeholder,\n    onInput: inputEvent => {\n      const target = inputEvent.target;\n      props.updateFormInternalValue(target.value);\n      props.valueChange(target.value);\n    },\n    onBlur: () => props.onBlur(),\n    style: {\n      resize: props.resizeBehavior,\n      height: props.textareaHeight,\n      width: props.textareaWidth\n    }\n  }, props.ariaAttributes));\n}\nfunction InputElement(props) {\n  return h(\"input\", Object.assign({\n    id: props.id,\n    autoComplete: \"off\",\n    readOnly: props.readonly,\n    disabled: props.disabled,\n    step: props.step,\n    min: props.min,\n    max: props.max,\n    maxLength: props.maxLength ? Number(props.maxLength) : undefined,\n    minLength: props.minLength ? Number(props.minLength) : undefined,\n    ref: props.inputRef,\n    pattern: props.pattern,\n    type: props.type,\n    class: {\n      'is-invalid': props.isInvalid\n    },\n    style: {\n      textAlign: props.textAlignment\n    },\n    required: props.required,\n    value: props.value,\n    placeholder: props.placeholder,\n    onKeyPress: event => props.onKeyPress(event),\n    onKeyDown: e => {\n      var _a;\n      (_a = props.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      handleSubmitOnEnterKeydown(e, !!props.suppressSubmitOnEnter, props.form);\n    }\n  }, {\n    onBeforeInput: event => {\n      var _a;\n      return (_a = props.onBeforeInput) === null || _a === void 0 ? void 0 : _a.call(props, event);\n    }\n  }, {\n    onPaste: event => {\n      var _a;\n      return (_a = props.onPaste) === null || _a === void 0 ? void 0 : _a.call(props, event);\n    },\n    onInput: inputEvent => {\n      const target = inputEvent.target;\n      props.updateFormInternalValue(target.value);\n      props.valueChange(target.value);\n    },\n    onBlur: () => props.onBlur()\n  }, props.ariaAttributes));\n}\nconst SlotEnd = (props, children) => {\n  return h(\"div\", {\n    class: \"end-container\",\n    ref: props.slotEndRef\n  }, h(\"slot\", {\n    name: \"end\",\n    onSlotchange: props.onSlotChange\n  }), children);\n};\nconst SlotStart = props => {\n  return h(\"div\", {\n    class: \"start-container\",\n    ref: props.slotStartRef\n  }, h(\"slot\", {\n    name: \"start\",\n    onSlotchange: props.onSlotChange\n  }));\n};\nexport { InputElement as I, SlotEnd as S, TextareaElement as T, addDisposableChangesAndVisibilityObservers as a, adjustPaddingForStartAndEnd as b, createPickerValidityStateTracker as c, SlotStart as d, emitPickerValidityState as e, checkInternalValidity as f, getAriaAttributesForInput as g, handleSubmitOnEnterKeydown as h, checkAllowedKeys as i, mapValidationResult as m, onInputBlur as o };\n\n\n"],"mappings":"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","names":["shakeInput","input","animate","Animation","mapValidationResult","ref","result","checkAllowedKeys","comp","event","checkInternalValidity","__async","validityState","currentValidityState","newValidityState","shouldSuppressInternalValidation","valid","onInputBlur","applyPaddingEnd","inputElement","width","options","_a","padding","convertToRemString","adjustPaddingForStartAndEnd","startElement","endElement","startBoundingRect","endBoundingRect","getAriaAttributesForInput","component","inputAria","a11yBoolean","addDisposableChangesAndVisibilityObservers","element","callback","intersectionObserver","observeElementUntilVisible","mutationObserver","createMutationObserver","hostElement","updateCallback","entries","entry","handleSubmitOnEnterKeydown","suppressSubmitOnEnter","form","submitButton","createPickerValidityStateTracker","emitPickerValidityState","emitPickerValidityStateChangeIfChanged","state","tracker","context","currentPatternMismatch","currentValueMissing","TextareaElement","props","h","inputEvent","target","InputElement","SlotEnd","children","SlotStart"],"x_google_ignoreList":[0]}