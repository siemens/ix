{"version":3,"sources":["node_modules/@siemens/ix/dist/esm/validation-3877QBzA.js"],"sourcesContent":["import { g as getElement } from './index-CtoreFVF.js';\n\n/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nasync function isTouched(host) {\n  if (typeof host.isTouched === 'function') {\n    return host.isTouched();\n  }\n}\nasync function shouldSuppressInternalValidation(host) {\n  if (host.getAssociatedFormElement && typeof host.getAssociatedFormElement === 'function') {\n    const form = await host.getAssociatedFormElement();\n    if (!form) {\n      return false;\n    }\n    return form.noValidate;\n  }\n  return false;\n}\nfunction createClassMutationObserver(element, callback, options) {\n  const observer = new MutationObserver(callback);\n  observer.observe(element, {\n    subtree: options === null || options === void 0 ? void 0 : options.includeChildren,\n    childList: options === null || options === void 0 ? void 0 : options.includeChildren,\n    attributes: true,\n    attributeFilter: ['class']\n  });\n  return {\n    destroy() {\n      observer.disconnect();\n    }\n  };\n}\nfunction classListContains(hostElement, className, includeChildren) {\n  return hostElement.classList.contains(`${className}`) || (includeChildren ? !!hostElement.querySelector(`.${className}`) : false);\n}\nfunction checkFieldClasses(hostElement, includeChildren = false) {\n  return {\n    isInvalid: classListContains(hostElement, 'ix-invalid', includeChildren) || classListContains(hostElement, 'ix-invalid--validity-invalid', includeChildren),\n    isInvalidByRequired: classListContains(hostElement, 'ix-invalid--required', includeChildren),\n    isValid: classListContains(hostElement, 'ix-valid', includeChildren),\n    isInfo: classListContains(hostElement, 'ix-info', includeChildren),\n    isWarning: classListContains(hostElement, 'ix-warning', includeChildren)\n  };\n}\nfunction HookValidationLifecycle(options) {\n  return (proto, methodName) => {\n    let checkIfRequiredFunction;\n    let classMutationObserver;\n    const {\n      componentWillLoad,\n      disconnectedCallback,\n      connectedCallback\n    } = proto;\n    proto.connectedCallback = function () {\n      const host = getElement(this);\n      checkIfRequiredFunction = async () => {\n        const skipValidation = await shouldSuppressInternalValidation(host);\n        if (skipValidation) {\n          return;\n        }\n        if (host.hasValidValue && typeof host.hasValidValue === 'function') {\n          const hasValue = await host.hasValidValue();\n          const touched = await isTouched(host);\n          if (host.required) {\n            host.classList.toggle('ix-invalid--required', !hasValue && touched);\n          } else {\n            host.classList.remove('ix-invalid--required');\n          }\n        }\n        if (host.getValidityState && typeof host.getValidityState === 'function') {\n          const validityState = await host.getValidityState();\n          const touched = await isTouched(host);\n          host.classList.toggle(`ix-invalid--validity-patternMismatch`, validityState.patternMismatch);\n          host.classList.toggle('ix-invalid--validity-invalid', !validityState.valid && touched);\n        }\n      };\n      host.addEventListener('checkedChange', checkIfRequiredFunction);\n      host.addEventListener('valueChange', checkIfRequiredFunction);\n      host.addEventListener('ixBlur', checkIfRequiredFunction);\n      setTimeout(checkIfRequiredFunction);\n      return connectedCallback === null || connectedCallback === void 0 ? void 0 : connectedCallback.call(this);\n    };\n    proto.componentWillLoad = function () {\n      const host = getElement(this);\n      classMutationObserver = createClassMutationObserver(host, () => {\n        const result = checkFieldClasses(host, options === null || options === void 0 ? void 0 : options.includeChildren);\n        proto[methodName].call(this, result);\n      }, options);\n      const result = checkFieldClasses(host, options === null || options === void 0 ? void 0 : options.includeChildren);\n      proto[methodName].call(this, result);\n      return componentWillLoad === null || componentWillLoad === void 0 ? void 0 : componentWillLoad.call(this);\n    };\n    proto.disconnectedCallback = function () {\n      const host = getElement(this);\n      if (host && classMutationObserver) {\n        classMutationObserver.destroy();\n        classMutationObserver = null;\n      }\n      if (host && checkIfRequiredFunction) {\n        host.removeEventListener('checkedChange', checkIfRequiredFunction);\n        host.removeEventListener('valueChange', checkIfRequiredFunction);\n        host.removeEventListener('ixBlur', checkIfRequiredFunction);\n        checkIfRequiredFunction = null;\n      }\n      return disconnectedCallback === null || disconnectedCallback === void 0 ? void 0 : disconnectedCallback.call(this);\n    };\n  };\n}\nfunction getValidationText(isInputInvalid, customInvalidText, i18nFallbackText) {\n  if (isInputInvalid) {\n    return customInvalidText !== null && customInvalidText !== void 0 ? customInvalidText : i18nFallbackText;\n  }\n  return customInvalidText;\n}\nexport { HookValidationLifecycle as H, checkFieldClasses as a, createClassMutationObserver as c, getValidationText as g, shouldSuppressInternalValidation as s };\n\n\n"],"mappings":"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","names":["isTouched","host","__async","shouldSuppressInternalValidation","form","createClassMutationObserver","element","callback","options","observer","classListContains","hostElement","className","includeChildren","checkFieldClasses","HookValidationLifecycle","proto","methodName","checkIfRequiredFunction","classMutationObserver","componentWillLoad","disconnectedCallback","connectedCallback","getElement","hasValue","touched","validityState","result","getValidationText","isInputInvalid","customInvalidText","i18nFallbackText"],"x_google_ignoreList":[0]}