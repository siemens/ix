import{a as o}from"./chunk-ZX2EE6N2.js";var a="data-ix-theme",r="data-ix-color-schema",h=class{get themeChanged(){return this._themeChanged}get schemaChanged(){return this._schemaChanged}hasVariantSuffix(t){return t.endsWith(this.suffixDark)||t.endsWith(this.suffixLight)}isThemeClass(t){return t.startsWith(this.prefixTheme)&&this.hasVariantSuffix(t)}setTheme(t,e=!1){if(this.isThemeClass(t)?this.replaceThemeClass(t):document.documentElement.setAttribute(a,t),e){let i=u();this.setVariant(i)}}replaceThemeClass(t){let e=[];Array.from(document.documentElement.classList).filter(i=>i&&this.isThemeClass(i)).forEach(i=>{e.push(i)}),document.documentElement.classList.remove(...e),document.documentElement.classList.add(t)}toggleMode(){if(document.documentElement.hasAttribute(r)){let e=this.getDataColorSchema(document.documentElement);document.documentElement.setAttribute(r,e==="dark"?"light":"dark");return}let t=[];if(Array.from(document.documentElement.classList).filter(e=>e&&this.isThemeClass(e)).forEach(e=>{t.push(e)}),t.length===0){document.documentElement.classList.add(this.getOppositeMode(this.defaultTheme));return}t.forEach(e=>{document.documentElement.classList.replace(e,this.getOppositeMode(e))})}getDataColorSchema(t){return t.getAttribute(r)}getCurrentTheme(){var t;return(t=Array.from(document.documentElement.classList).find(e=>this.isThemeClass(e)))!==null&&t!==void 0?t:`theme-${document.documentElement.getAttribute(a)||"classic"}-${document.documentElement.getAttribute(r)||u()}`}setVariant(t=u()){if(this.getDataColorSchema(document.documentElement)){document.documentElement.setAttribute(r,t);return}let e=this.getCurrentTheme();document.documentElement.classList.remove(e),e.endsWith(this.suffixDark)&&document.documentElement.classList.add(e.replace(/-dark$/g,`-${t}`)),e.endsWith(this.suffixLight)&&document.documentElement.classList.add(e.replace(/-light$/g,`-${t}`)),document.documentElement.setAttribute(r,t)}getOppositeMode(t){return t.endsWith(this.suffixDark)?t.replace(/-dark$/g,this.suffixLight):t.endsWith(this.suffixLight)?t.replace(/-light$/g,this.suffixDark):""}splitMutations(t){let e=t.filter(s=>s.attributeName==="class"),i=t.filter(s=>s.attributeName===a||s.attributeName===r);return{classMutations:e,dataMutations:i}}handleClassMutations(t){return t.forEach(e=>{let{target:i}=e;i.classList.forEach(s=>{var n;this.isThemeClass(s)&&!(!((n=e.oldValue)===null||n===void 0)&&n.includes(s))&&this._themeChanged.emit(s)})})}handleDataMutations(t){return t.forEach(e=>{let{target:i}=e,s=i.attributes.getNamedItem(a);s?.value&&e.oldValue!==s.value&&this._themeChanged.emit(s.value);let n=i.attributes.getNamedItem(r);n?.value&&e.oldValue!==n.value&&this._schemaChanged.emit(n.value)})}registerMutationObservers(){if(typeof window>"u")return;if(!("MutationObserver"in window)){console.warn("ThemeSwitcher not supported by your browser. Missing MutationObserver API");return}let t={attributeFilter:["class",a,r],attributeOldValue:!0},e=i=>{let{classMutations:s,dataMutations:n}=this.splitMutations(i);this.handleClassMutations(s),this.handleDataMutations(n)};this.mutationObserver=new MutationObserver(e),this.mutationObserver.observe(document.documentElement,t)}constructor(){this.prefixTheme="theme-",this.suffixLight="-light",this.suffixDark="-dark",this.defaultTheme="theme-classic-dark",this._themeChanged=new o,this._schemaChanged=new o,this.registerMutationObservers()}},u=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",l=new h;export{l as a};
