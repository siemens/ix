import{a as y}from"./chunk-B64AMQNF.js";import{a as u,b,c as f,d as v,e as T,f as g,h as w}from"./chunk-WJENEVY5.js";import{b as d}from"./chunk-BBI5W3XS.js";import{b as p}from"./chunk-M4AZQB5Q.js";import{a as m}from"./chunk-5MUU74O4.js";import{a as k,c as s,d as L,e as x}from"./chunk-N6UD2XNE.js";import{h as r}from"./chunk-B4AJQJMI.js";var P='.dialog{margin:0;padding:0;border:none;max-width:18.25rem;width:-moz-max-content;width:max-content;background-color:transparent;overflow-wrap:break-word;box-shadow:none;overflow:visible}.tooltip-container{display:block;position:relative;width:auto;height:-moz-fit-content;height:fit-content;background:var(--theme-tootlip--background);color:var(--theme-color-std-text);padding:0.375rem 0.75rem;box-shadow:var(--theme-shadow-4);border-radius:0.25rem}.content-wrapper{overflow:auto}.tooltip-title{display:flex}.tooltip-title ::slotted(ix-icon){margin:0.125rem 0.25rem 0.125rem 0}.arrow,.arrow::before{position:absolute;width:12px;height:12px;background:inherit}.arrow{visibility:hidden}.arrow::before{visibility:visible;content:"";transform:rotate(45deg);background-color:var(--theme-tootlip--background)}',h=-6,a=c=>c!==null?`${c}px`:"",O=0,H=(()=>{let c=class{constructor(t){k(this,t),this.interactive=!1,this.placement="top",this.showDelay=0,this.hideDelay=50,this.animationFrame=!1,this.visible=!1,this.instance=O++,this.dialogRef=m()}get arrowElement(){return this.hostElement.shadowRoot.querySelector(".arrow")}showTooltip(t){return r(this,null,function*(){if(this.clearTimeouts(),this.showTooltipTimeout||this.visibleFor===t)return;let e=yield this.dialogRef.waitForCurrent();this.showTooltipTimeout=setTimeout(()=>{this.setAnchorElement(t),e.showPopover(),this.applyTooltipPosition(t,e),this.registerTooltipListener(e)},this.showDelay)})}hideTooltip(){return r(this,arguments,function*(t=this.hideDelay){if(this.clearTimeouts(),this.hideTooltipTimeout||!this.visible)return;this.interactive&&t===50&&(t=150);let e=yield this.dialogRef.waitForCurrent();this.hideTooltipTimeout=setTimeout(()=>{var i,o;this.setAnchorElement(),e.hidePopover(),(i=this.disposeAutoUpdate)===null||i===void 0||i.call(this),(o=this.disposeTooltipListener)===null||o===void 0||o.call(this)},t)})}setAnchorElement(t){t?(this.visibleFor=t,this.visible=!0):(this.visibleFor=void 0,this.visible=!1)}computeArrowPosition({placement:t,middlewareData:e}){let{x:i,y:o}=e.arrow,l={top:"unset",right:"unset",bottom:"unset",left:"unset"};if(t.startsWith("top"))return Object.assign(Object.assign({},l),{left:a(i),bottom:a(h)});if(t.startsWith("right"))return Object.assign(Object.assign({},l),{left:a(h),top:a(o)});if(t.startsWith("bottom"))return Object.assign(Object.assign({},l),{left:a(i),top:a(h)});if(t.startsWith("left"))return Object.assign(Object.assign({},l),{right:a(h),top:a(o)})}computeTooltipPosition(t,e){return r(this,null,function*(){return w(t,e,{strategy:"fixed",placement:this.placement,middleware:[f(),b(12),g({element:this.arrowElement}),v({fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"end",padding:10}),T()]})})}applyTooltipArrowPosition(t){let e=this.computeArrowPosition(t);Object.assign(this.arrowElement.style,e)}applyTooltipPosition(t,e){return r(this,null,function*(){if(t)return new Promise(i=>{var o;(o=this.disposeAutoUpdate)===null||o===void 0||o.call(this),this.disposeAutoUpdate=u(t,e,()=>r(this,null,function*(){var l;let n=yield this.computeTooltipPosition(t,e);((l=n.middlewareData.hide)===null||l===void 0?void 0:l.referenceHidden)&&(this.hideTooltip(0),i(n)),n.middlewareData.arrow&&this.applyTooltipArrowPosition(n);let{x:E,y:A}=n;Object.assign(e.style,{left:a(E),top:a(A)}),i(n)}),{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,animationFrame:this.animationFrame})})})}queryAnchorElements(){return r(this,null,function*(){if(this.for)return Array.isArray(this.for)?this.resolveElements(this.for):this.resolveElements([this.for])})}resolveElements(t){return r(this,null,function*(){let e=[];return yield Promise.all(t.map(i=>r(this,null,function*(){if(typeof i=="string"){let o=yield y(i,this.hostElement);o&&e.push(...o)}else i instanceof HTMLElement?e.push(i):i instanceof Promise&&e.push(yield i)}))),e})}registerTriggerListener(){return r(this,null,function*(){var t;(t=this.disposeTriggerListener)===null||t===void 0||t.call(this);let e=yield this.queryAnchorElements();if(!e)return;let i=[];e.forEach(o=>{i.push({element:o,eventType:"mouseenter",callback:()=>{this.showTooltip(o)}},{element:o,eventType:"mouseleave",callback:()=>{this.hideTooltip()}},{element:o,eventType:"focus",callback:()=>{this.showTooltip(o)}},{element:o,eventType:"focusout",callback:()=>{this.hideTooltip()}})}),this.disposeTriggerListener=d(i)})}registerTooltipListener(t){var e;(e=this.disposeTooltipListener)===null||e===void 0||e.call(this),this.disposeTooltipListener=d([{element:t,eventType:"mouseenter",callback:()=>{this.interactive&&this.clearHideTimeout()}},{element:t,eventType:"focus",callback:()=>{this.interactive&&this.clearHideTimeout()}},{element:t,eventType:"mouseleave",callback:()=>{this.hideTooltip()}},{element:t,eventType:"focusout",callback:()=>{this.hideTooltip()}},{element:t,eventType:"click",callback:i=>{i.stopPropagation()}},{element:document,eventType:"keydown",callback:i=>{i.key==="Escape"&&this.hideTooltip()}}])}registerDomChangeListener(){let t=new MutationObserver(()=>{this.registerTriggerListener()});t.observe(document.body,{attributes:!0,attributeFilter:["data-ix-tooltip"],childList:!0,subtree:!0}),this.disposeDomChangeListener=()=>{t.disconnect()}}clearHideTimeout(){clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=void 0}clearShowTimeout(){clearTimeout(this.showTooltipTimeout),this.showTooltipTimeout=void 0}clearTimeouts(){this.clearHideTimeout(),this.clearShowTimeout()}componentWillLoad(){this.registerTriggerListener()}componentDidLoad(){this.registerDomChangeListener()}disconnectedCallback(){var t,e,i,o;this.clearTimeouts(),(t=this.disposeAutoUpdate)===null||t===void 0||t.call(this),(e=this.disposeTriggerListener)===null||e===void 0||e.call(this),(i=this.disposeTooltipListener)===null||i===void 0||i.call(this),(o=this.disposeDomChangeListener)===null||o===void 0||o.call(this)}handleTitleIconSlotChange(t){let e=t.target,i=p(e);for(let o of i)o.tagName.toLowerCase()==="ix-icon"&&(o.size="16")}render(){return s(L,{key:"682cc1f0cc62163a87113f6e1e803d220b5db716",role:"tooltip",class:{visible:this.visible}},s("dialog",{key:"c12e5107c68039d8689291d1771121e697223f1f",ref:this.dialogRef,id:"tooltip-"+this.instance,class:"dialog",popover:"manual",inert:!this.visible},s("div",{key:"6fe8c464e70442c3b629be576ddcf4984ee155a1",class:"tooltip-container"},s("div",{key:"b0cc67360a4988786796e565b08c76c90d91cb36",class:"content-wrapper"},s("div",{key:"5097e3b2b68bcd75e01285793294d60f5dac15db",class:"tooltip-title"},s("slot",{key:"f0b86340bf7e5163a8970ea6b4c17f9bc6631255",name:"title-icon",onSlotchange:t=>this.handleTitleIconSlotChange(t)}),s("ix-typography",{key:"44618c64116435d5032fa031c1503e11b5a12a94",format:"h5"},this.titleContent,s("slot",{key:"5646d3eefac1f32e6313cd76ffbc8296f575fc22",name:"title-content"}))),s("slot",{key:"78ba14bb163ad2e06a8e17e32b2e38a9a62bdcbc"}),s("div",{key:"bd9fdd5d2ecda93b71ad5a0609218d1a19bd303a",class:"arrow"})))))}get hostElement(){return x(this)}};return c.style=P,c})();export{H as ix_tooltip};
