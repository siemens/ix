function u(n){return n!==null&&n.getDropdownItemElement!==void 0&&typeof n.getDropdownItemElement=="function"}var d=class{constructor(){this.dropdowns=new Map,this.submenuIds={},this.isWindowListenerActive=!1}connected(s){this.isWindowListenerActive||this.addOverlayListeners(),this.dropdowns.set(s.getId(),s),s.discoverAllSubmenus&&this.discoverSubmenus()}disconnected(s){let e=s.getId();this.removeFromSubmenuIds(e),this.dropdowns.delete(e)}removeFromSubmenuIds(s){this.dropdowns.forEach(e=>{let i=this.submenuIds[e.getId()];if(i){let t=i.indexOf(s);t>-1&&i.splice(t,1)}}),delete this.submenuIds[s]}getDropdownById(s){return this.dropdowns.get(s)}discoverSubmenus(){this.dropdowns.forEach(s=>{s.discoverSubmenu()})}present(s){var e;!s.isPresent()&&(!((e=s.willPresent)===null||e===void 0)&&e.call(s))&&(this.submenuIds[s.getId()]=s.getAssignedSubmenuIds(),s.present())}dismissChildren(s){let e=this.submenuIds[s]||[];for(let i of e){let t=this.dropdowns.get(i);t&&this.dismiss(t)}}dismiss(s){var e;s.isPresent()&&(!((e=s.willDismiss)===null||e===void 0)&&e.call(s))&&(this.dismissChildren(s.getId()),s.dismiss(),delete this.submenuIds[s.getId()])}dismissAll(s=[],e=!1){this.dropdowns.forEach(i=>{let t=i.closeBehavior==="inside"||i.closeBehavior===!1,o=s.includes(i.getId()),h=this.buildComposedPath(i.getId(),new Set);if(s.length>0&&e){let r=!1;if(s.forEach(l=>{if(h.has(l)){r=!0;return}}),!r)return}!o&&t||this.dismiss(i)})}dismissOthers(s){let e=this.buildComposedPath(s,new Set);e.add(s),this.dropdowns.forEach(i=>{i.closeBehavior!=="inside"&&i.closeBehavior!==!1&&!e.has(i.getId())&&this.dismiss(i)})}pathIncludesTrigger(s){for(let e of s)if(e instanceof HTMLElement&&e.hasAttribute("data-ix-dropdown-trigger"))return e}pathIncludesDropdown(s){return!!s.find(e=>e.tagName==="IX-DROPDOWN")}buildComposedPath(s,e){this.submenuIds[s]&&e.add(s);for(let i of Object.keys(this.submenuIds))this.submenuIds[i].includes(s)&&this.buildComposedPath(i,e).forEach(t=>e.add(t));return e}addOverlayListeners(){this.isWindowListenerActive=!0,window.addEventListener("click",s=>{let e=this.pathIncludesTrigger(s.composedPath()),i=this.pathIncludesDropdown(s.composedPath());!e&&!i&&this.dismissAll()}),window.addEventListener("keydown",s=>{s.key==="Escape"&&this.dismissAll([...this.dropdowns.keys()])})}},a=new d;export{u as a,a as b};
