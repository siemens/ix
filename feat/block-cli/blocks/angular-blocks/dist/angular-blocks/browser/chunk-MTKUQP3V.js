import{b as d}from"./chunk-TKLP633M.js";import{C as s}from"./chunk-7FRNBKW2.js";import{a as r}from"./chunk-355ZUK6P.js";import{a as h,c as a,d as c,e as l,f as g,h as u}from"./chunk-M3SREADF.js";import"./chunk-NWJ5J3BN.js";var m=":host{display:inline-block;position:relative}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}@-moz-document url-prefix(){:host *{scrollbar-color:var(--theme-scrollbar-thumb--background) var(--theme-scrollbar-track--background);scrollbar-width:thin}}:host{}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host{}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host{}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host{}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}@media (max-width: 48em){:host .min-width{width:-moz-min-content;width:min-content}}@media (min-width: 48em){:host .border-right{border-right:var(--theme-x-weak-bdr-2)}}:host ix-button{width:100%}:host .max-height{max-height:-moz-max-content;max-height:max-content}:host .no-margin{margin:0;padding:0}:host .pull-right{float:right;padding:0 1rem 0.75rem 1rem}",p=(()=>{let o=class{constructor(e){h(this,e),this.dateRangeChange=g(this,"dateRangeChange",7),this.disabled=!1,this.format="yyyy/LL/dd",this.singleSelection=!1,this.from="",this.to="",this.minDate="",this.maxDate="",this.dateRangeId="custom",this.variant="primary",this.loading=!1,this.showWeekNumbers=!1,this.customRangeDisabled=!1,this.dateRangeOptions=[],this.weekStartIndex=0,this.i18nCustomItem="Custom...",this.i18nDone="Done",this.i18nNoRange="No range set",this.today=d.now().toISO(),this.enableTopLayer=!1,this.selectedDateRangeId="",this.triggerRef=r(),this.datePickerTouched=!1}onDateRangeIdChange(){this.onRangeListSelect(this.dateRangeId),this.updateCurrentDate(),this.setDateRangeSelection(this.dateRangeId),this.currentRangeValue&&this.onDateSelect({from:this.currentRangeValue.from,to:this.currentRangeValue.to,id:this.currentRangeValue.id})}onDateRangeOptionsChange(){this.initialize(),this.onDateRangeIdChange()}onDisabledChange(){this.disabled&&this.closeDropdown()}componentWillLoad(){this.initialize(),this.setDateRangeSelection(this.dateRangeId)}async getDateRange(){return this.currentRangeValue||{id:"",from:"",to:""}}initialize(){let e=this.dateRangeId==="custom"||!this.dateRangeId&&!!this.from&&!!this.to;if(e&&!this.customRangeDisabled){this.selectedDateRangeId="custom",this.updateCurrentDate();return}if(!(!e&&!this.from)){console.warn('"from" and "range-date-id" is provided this is an invalid combination. Using "custom".'),this.selectedDateRangeId="custom",this.updateCurrentDate();return}}updateCurrentDate(){this.currentRangeValue={id:this.selectedDateRangeId,from:this.from,to:this.to}}onDateSelect(e,i=!0){this.dateRangeChange.emit(e),i&&this.closeDropdown(),this.datePickerTouched=!1}onRangeListSelect(e){this.setDateRangeSelection(e)&&this.currentRangeValue&&this.onDateSelect(this.currentRangeValue)}setDateRangeSelection(e){this.selectedDateRangeId=e;let i=this.dateRangeOptions.find(n=>n.id===e);return i&&(this.currentRangeValue=i),i}closeDropdown(){let e=this.hostElement.shadowRoot.querySelector("ix-dropdown");e&&(e.show=!1)}getButtonLabel(){var e,i;if(this.selectedDateRangeId==="custom"&&(!((e=this.currentRangeValue)===null||e===void 0)&&e.from)){let t=this.currentRangeValue.from;return this.currentRangeValue.to&&(t+=` - ${this.currentRangeValue.to}`),t}if(!this.selectedDateRangeId)return this.i18nNoRange;if(!this.dateRangeOptions||((i=this.dateRangeOptions)===null||i===void 0?void 0:i.length)===0)return this.i18nNoRange;let n=this.dateRangeOptions.find(t=>t.id===this.selectedDateRangeId);return n?n.label:(console.error(`Cannot find range option with id ${this.selectedDateRangeId}`),this.i18nNoRange)}render(){var e,i,n;return a(c,{key:"1e4e1a6c37ac1d303d5a2850ceededb40d1864fc"},a("ix-button",{key:"37fcfabb6c22f70a16cca1d03896136c15e6317c","data-testid":"date-dropdown-trigger","data-date-dropdown-trigger":!0,variant:this.variant,loading:this.loading,icon:s,ref:this.triggerRef,disabled:this.disabled,ariaLabel:this.ariaLabelDropdownButton},this.getButtonLabel()),a("ix-dropdown",{key:"9427f70c90fff6beb8aa5cda6b92c7767e51c66f","data-testid":"date-dropdown","data-date-dropdown":!0,class:"min-width max-height",trigger:this.triggerRef.waitForCurrent(),closeBehavior:"outside",placement:"bottom-start",enableTopLayer:this.enableTopLayer,onShowChanged:({detail:t})=>{!t&&this.selectedDateRangeId==="custom"&&this.datePickerTouched&&this.currentRangeValue&&this.onDateSelect(this.currentRangeValue)}},a("ix-layout-grid",{key:"6f9c573a4cd7563c251b2aca4698e841a3bf64c5",noMargin:!0},a("ix-row",{key:"67ad45ba2c66bff95f76a1aac3c90139c1233df7"},((e=this.dateRangeOptions)===null||e===void 0?void 0:e.length)>1&&a("ix-col",{key:"4c60c9a3e00d12021714047d2a37f7926ae6ebdf",class:{"no-margin":!0,"border-right":this.selectedDateRangeId==="custom"}},this.dateRangeOptions.map(t=>a("ix-dropdown-item",{label:t.label,onClick:()=>this.onRangeListSelect(t.id),checked:this.selectedDateRangeId===t.id})),a("div",{key:"de40bc9a45497fc8ac848ecc5565e6a6ee41e2ea",hidden:this.customRangeDisabled},a("ix-dropdown-item",{key:"2dfa9902b89a2247b0e7d007667cca2718fc4333",label:this.i18nCustomItem,checked:this.selectedDateRangeId==="custom",onClick:()=>this.onRangeListSelect("custom")}))),a("ix-col",{key:"0e474f288674c6e77f9f99a90122dcdf13b3d1d0",class:"no-margin"},this.selectedDateRangeId==="custom"&&a(u,{key:"59e0b51735ed6ed8951ba7834b0d9bf88dc17149"},a("ix-date-picker",{key:"f2f9cfc781f7733d9aa7e40b3ba980d71072286a",embedded:!0,locale:this.locale,onDateChange:t=>{t.stopPropagation(),this.currentRangeValue=Object.assign(Object.assign({},t.detail),{id:"custom"}),this.datePickerTouched=!0},onDateRangeChange:t=>t.stopPropagation(),format:this.format,singleSelection:this.singleSelection,from:this.from||((i=this.currentRangeValue)===null||i===void 0?void 0:i.from),to:this.to||((n=this.currentRangeValue)===null||n===void 0?void 0:n.to),minDate:this.minDate,maxDate:this.maxDate,today:this.today,weekStartIndex:this.weekStartIndex,showWeekNumbers:this.showWeekNumbers}),a("div",{key:"5aff3dd50d2796a9da90b02cd2dddb29520ea507",class:"pull-right"},a("ix-button",{key:"c015bc6e5e66ee3e5d9dfac66a4bad0a29af6caa",onClick:()=>{this.currentRangeValue&&this.onDateSelect(this.currentRangeValue)}},this.i18nDone))))))))}get hostElement(){return l(this)}static get watchers(){return{dateRangeId:["onDateRangeIdChange"],to:["onDateRangeIdChange"],from:["onDateRangeIdChange"],dateRangeOptions:["onDateRangeOptionsChange"],disabled:["onDisabledChange"]}}};return o.style=m,o})();export{p as ix_date_dropdown};
