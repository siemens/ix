import{a as y}from"./chunk-C65ZGZNU.js";import{a as I}from"./chunk-PYELUUTO.js";import{a as g}from"./chunk-S5DAGWUC.js";import"./chunk-BBI5W3XS.js";import{d as w}from"./chunk-NW7CN6R6.js";import{M as b,e as u,j as p,o as m}from"./chunk-7FRNBKW2.js";import{a as f}from"./chunk-V4OJMOAJ.js";import{a as h}from"./chunk-355ZUK6P.js";import{a as v}from"./chunk-C6FVZU4H.js";import{a as x,c as l,d as S,e as C,f as d}from"./chunk-M3SREADF.js";import"./chunk-NWJ5J3BN.js";var k=":host{display:inline-block;position:relative;min-height:2rem;height:auto;border-radius:var(--theme-input--border-radius)}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}@-moz-document url-prefix(){:host *{scrollbar-color:var(--theme-scrollbar-thumb--background) var(--theme-scrollbar-track--background);scrollbar-width:thin}}:host{}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host{}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host{}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host{}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}:host .display-none{display:none}:host .select{position:relative;display:flex;align-items:center;width:100%;background-color:var(--theme-input--background);border:var(--theme-input--border-thickness) solid var(--theme-input--border-color);border-radius:var(--theme-input--border-radius);padding:0 0 0 0.5rem;box-shadow:var(--theme-inset-shadow-1) !important}:host .select:not(.disabled):not(:disabled){cursor:pointer}:host .select:not(.disabled):not(:disabled):hover,:host .select:not(.disabled):not(:disabled).hover{background-color:var(--theme-input--background--hover);border-color:var(--theme-input--border-color--hover)}:host .select:focus-within{background-color:var(--theme-input--background--focus);border-color:var(--theme-input--border-color--focus);outline:1px solid #119fff;outline-offset:var(--theme-input--focus--outline-offset)}:host .select.readonly,:host .select.disabled{box-shadow:none !important;border:none;border-radius:0;cursor:pointer}:host .select.readonly,:host .select.readonly:hover,:host .select.readonly:active,:host .select.disabled,:host .select.disabled:hover,:host .select.disabled:active{background-color:transparent !important}:host .select.readonly:focus,:host .select.readonly:focus-within,:host .select.readonly:focus-visible,:host .select.disabled:focus,:host .select.disabled:focus-within,:host .select.disabled:focus-visible{outline:none}:host .select.readonly input:focus,:host .select.readonly input:focus-visible,:host .select.disabled input:focus,:host .select.disabled input:focus-visible{outline:none}:host .select.disabled{border-bottom:var(--theme-input--border-thickness) solid var(--theme-color-weak-bdr)}:host .select.disabled input{color:var(--theme-color-weak-text)}:host .select.readonly{border-bottom:var(--theme-input--border-thickness) solid var(--theme-color-soft-bdr)}:host .select.readonly input{color:var(--theme-color-std-text)}:host .hidden{display:none !important}:host .trigger{display:flex;align-items:center;flex-grow:1;height:100%}:host .input-container{display:flex;position:relative;align-items:flex-start;width:100%;height:100%}:host .input-container .chips{position:relative;display:flex;align-items:center;flex-wrap:wrap;height:100%;max-height:3.5rem;flex-grow:1;overflow-y:auto}:host .input-container .chips>ix-filter-chip{margin:0.1rem}:host .input-container ix-icon-button{height:1.875rem;width:1.875rem;min-height:1.875rem;min-width:1.875rem}:host .input-container input{background:transparent;height:1.75rem;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:Siemens Sans, sans-serif;font-size:0.875rem;font-weight:400;line-height:1.429em;color:var(--theme-color-std-text);-webkit-font-smoothing:antialiased;-moz-osx-font-smooting:grayscale}:host .input-container input,:host .input-container input:hover,:host .input-container input:focus-visible{border:none;outline:none}:host .input-container input::-moz-placeholder{color:var(--theme-input-select-icon--color)}:host .input-container input::placeholder{color:var(--theme-input-select-icon--color)}:host .input-container input.hide-placeholder::-moz-placeholder{opacity:0}:host .input-container input.hide-placeholder::placeholder{opacity:0}:host ix-dropdown{max-width:100%}:host .dropdown-visible{--ix-icon-button-color:var(--theme-color-std-text--hover)}:host .add-item{display:flex;justify-content:flex-start;align-items:center;position:relative;width:100%}:host .select-list-header{display:flex;align-items:center;height:2rem;color:var(--theme-select-list-item-hint--color);margin:0 0.5rem 0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host(.ix-info:not(.disabled):not(:disabled):not([disabled])) .select{border-color:var(--theme-input--border-color--info)}:host(.ix-info:not(.disabled):not(:disabled):not([disabled])) .select:hover{border-color:var(--theme-input--border-color--info--hover) !important}:host(.ix-info:not(.disabled):not(:disabled):not([disabled])) .select:active{border-color:var(--theme-input--border-color--info--active) !important}:host(.ix-warning:not(.disabled):not(:disabled):not([disabled])) .select{border-color:var(--theme-input--border-color--warning)}:host(.ix-warning:not(.disabled):not(:disabled):not([disabled])) .select:hover{border-color:var(--theme-input--border-color--warning--hover) !important}:host(.ix-warning:not(.disabled):not(:disabled):not([disabled])) .select:active{border-color:var(--theme-input--border-color--warning--active) !important}:host([class*=ix-invalid]:not(.disabled):not(:disabled):not([disabled])) .select,:host(.ix-invalid--required:not(.disabled):not(:disabled):not([disabled])) .select{border-color:var(--theme-input--border-color--invalid);background-color:var(--theme-input--background--invalid);box-shadow:none}:host([class*=ix-invalid]:not(.disabled):not(:disabled):not([disabled])) .select:hover,:host(.ix-invalid--required:not(.disabled):not(:disabled):not([disabled])) .select:hover{border-color:var(--theme-input--border-color--invalid--hover) !important}:host([class*=ix-invalid]:not(.disabled):not(:disabled):not([disabled])) .select:active,:host(.ix-invalid--required:not(.disabled):not(:disabled):not([disabled])) .select:active{border-color:var(--theme-input--border-color--invalid--active) !important}",E=function(e,t,o,s){var i=arguments.length,n=i<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,o):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,o,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(i<3?r(n):i>3?r(t,o,n):r(t,o))||n);return i>3&&n&&Object.defineProperty(t,o,n),n},c=class{constructor(e){x(this,e),this.valueChange=d(this,"valueChange",7),this.inputChange=d(this,"inputChange",7),this.addItem=d(this,"addItem",7),this.ixBlur=d(this,"ixBlur",7),e.$hostElement$["s-ei"]?this.formInternals=e.$hostElement$["s-ei"]:(this.formInternals=e.$hostElement$.attachInternals(),e.$hostElement$["s-ei"]=this.formInternals),this.required=!1,this.ariaLabelChevronDownIconButton="Open select dropdown",this.value="",this.allowClear=!1,this.mode="single",this.editable=!1,this.disabled=!1,this.readonly=!1,this.i18nPlaceholder="Select an option",this.i18nPlaceholderEditable="Type of select option",this.i18nSelectListHeader="Select an option",this.i18nNoMatches="No matches",this.i18nAllSelected="All",this.hideListHeader=!1,this.collapseMultipleSelection=!1,this.enableTopLayer=!1,this.dropdownShow=!1,this.selectedLabels=[],this.isDropdownEmpty=!1,this.inputFilterText="",this.inputValue="",this.isInvalid=!1,this.isValid=!1,this.isInfo=!1,this.isWarning=!1,this.dropdownWrapperRef=h(),this.dropdownAnchorRef=h(),this.inputRef=h(),this.touched=!1,this.itemObserver=f(()=>{this.arrowFocusController&&(this.arrowFocusController.items=this.visibleNonShadowItems)}),this.focusControllerCallbackBind=this.focusDropdownItem.bind(this)}get nonShadowItems(){return Array.from(this.hostElement.querySelectorAll("ix-select-item"))}get visibleNonShadowItems(){return this.nonShadowItems.filter(e=>!e.classList.contains("display-none"))}get shadowItems(){return Array.from(this.hostElement.shadowRoot.querySelectorAll("ix-select-item"))}get visibleShadowItems(){return this.shadowItems.filter(e=>!e.classList.contains("display-none"))}get items(){return[...this.nonShadowItems,...this.shadowItems]}get visibleItems(){return this.items.filter(e=>!e.classList.contains("display-none"))}get selectedItems(){return this.items.filter(e=>e.selected)}get addItemButton(){return this.hostElement.shadowRoot.querySelector(".add-item")}get isSingleMode(){return this.mode==="single"}get isMultipleMode(){return this.mode==="multiple"}get isEveryDropdownItemHidden(){return this.items.every(e=>e.classList.contains("display-none"))}watchValue(e){this.value=e,this.updateSelection()}watchDropdownShow(e){e&&this.dropdownElement?this.itemObserver.observe(this.dropdownElement,{childList:!0,subtree:!0}):this.cleanupResources()}cleanupResources(){var e,t;(e=this.arrowFocusController)===null||e===void 0||e.disconnect(),this.arrowFocusController=void 0,(t=this.itemObserver)===null||t===void 0||t.disconnect()}onItemClicked(e){let t=e.detail;this.itemClick(t)}updateFormInternalValue(e){Array.isArray(e)?this.formInternals.setFormValue(e.join(",")):this.formInternals.setFormValue(e)}async hasValidValue(){return this.required&&!!this.hasValue()}hasValue(){return Array.isArray(this.value)?!!this.value.length:!!this.value}focusDropdownItem(e){var t,o;if(this.navigationItem=void 0,e<this.visibleNonShadowItems.length){let s=(o=(t=this.visibleNonShadowItems[e])===null||t===void 0?void 0:t.shadowRoot)===null||o===void 0?void 0:o.querySelector("ix-dropdown-item");if(!s)return;I(()=>{var i,n;(n=(i=s?.shadowRoot)===null||i===void 0?void 0:i.querySelector("button"))===null||n===void 0||n.focus()})}}itemClick(e){let t=this.value,o=this.toggleValue(e);if(this.value=o,this.emitValueChange(o)){this.value=t;return}this.updateSelection(),this.isMultipleMode&&this.inputFilterText&&(this.clearInput(),this.removeHiddenFromItems(),this.arrowFocusController&&(this.arrowFocusController.items=this.visibleNonShadowItems),this.navigationItem=void 0)}emitAddItem(e){var t;if(e===void 0||e.trim()==="")return!1;let{defaultPrevented:o}=this.addItem.emit(e);if(o)return!0;let s=document.createElement("ix-select-item");return s.value=e,s.label=e,(t=this.customItemsContainerElement)===null||t===void 0||t.appendChild(s),this.clearInput(),this.itemClick(e),!1}toggleValue(e){if(!this.isMultipleMode)return e;if(!this.value)return[e];let t=this.value;return Array.isArray(t)||(t=[t]),t.includes(e)?t.filter(o=>o!==e):[...t,e]}updateSelection(){var e,t;let o=[];this.value&&(o=Array.isArray(this.value)?[...this.value]:[this.value]),this.items.forEach(s=>{s.selected=o.some(i=>typeof i!=typeof s.value?i.toString()===s.value.toString():i===s.value)}),this.selectedLabels=this.selectedItems.map(s=>s.label),!((e=this.selectedLabels)===null||e===void 0)&&e.length&&this.isSingleMode?this.inputValue=(t=this.selectedLabels[0])!==null&&t!==void 0?t:"":this.inputValue="",this.inputElement&&(this.inputElement.value=this.inputValue)}emitValueChange(e){let{defaultPrevented:t}=this.valueChange.emit(e);return t?!0:(this.updateFormInternalValue(e),!1)}componentDidLoad(){var e;(e=this.inputElement)===null||e===void 0||e.addEventListener("input",()=>{var t;this.dropdownShow=!0,this.inputChange.emit((t=this.inputElement)===null||t===void 0?void 0:t.value)})}componentWillLoad(){this.updateSelection(),this.updateFormInternalValue(this.value)}componentDidRender(){!this.dropdownShow||this.arrowFocusController||!this.dropdownElement||(this.arrowFocusController=new y(this.visibleNonShadowItems,this.dropdownElement,this.focusControllerCallbackBind),this.arrowFocusController.wrap=!this.isAddItemVisible()&&!this.visibleShadowItems.length)}onLabelChange(e){e.preventDefault(),e.stopImmediatePropagation(),this.updateSelection()}disconnectedCallback(){this.cleanupResources()}itemExists(e){return this.items.find(t=>t.label===e)}dropdownVisibilityChanged(e){var t,o;this.dropdownShow=e.detail,e.detail?((t=this.inputElement)===null||t===void 0||t.focus(),(o=this.inputElement)===null||o===void 0||o.select(),this.removeHiddenFromItems(),this.isDropdownEmpty=this.isEveryDropdownItemHidden):(this.navigationItem=void 0,this.updateSelection(),this.inputFilterText="")}async onKeyDown(e){(e.code==="ArrowDown"||e.code==="ArrowUp")&&await this.onArrowNavigation(e,e.code),this.dropdownShow&&((e.code==="Enter"||e.code==="NumpadEnter")&&await this.onEnterNavigation(e.target),e.code==="Escape"&&(this.dropdownShow=!1))}async onEnterNavigation(e){if(this.isMultipleMode)return;let t=e?.label,o=this.itemExists(this.inputFilterText);if(o)this.itemClick(o.value);else if(this.editable&&!this.itemExists(t)&&this.emitAddItem(this.inputFilterText))return;this.dropdownShow=!1,this.updateSelection()}async onArrowNavigation(e,t){var o;if(e.defaultPrevented)return;if(e.preventDefault(),e.stopPropagation(),this.dropdownShow=!0,!this.navigationItem&&document.activeElement===this.hostElement){this.visibleItems.length?this.applyFocusTo(this.visibleItems.shift()):this.isAddItemVisible()&&this.focusAddItemButton();return}let s=t==="ArrowUp",i=document.activeElement?this.visibleNonShadowItems.indexOf(document.activeElement):-1;if(i===0){!this.visibleShadowItems.length&&this.isAddItemVisible()?this.focusAddItemButton():this.applyFocusTo(this.visibleShadowItems.pop());return}else if(i!==-1&&i===this.visibleNonShadowItems.length-1){this.visibleShadowItems.length?this.applyFocusTo(this.visibleShadowItems.shift()):this.isAddItemVisible()&&this.focusAddItemButton();return}if(!this.navigationItem)return;if(this.isAddItemVisible()&&(!((o=this.addItemElement)===null||o===void 0)&&o.contains(await this.navigationItem.getDropdownItemElement()))){s?this.applyFocusTo(this.visibleItems.pop()):this.visibleItems.length&&this.applyFocusTo(this.visibleItems.shift());return}let n=this.visibleShadowItems.indexOf(this.navigationItem);s?n===0?this.visibleNonShadowItems.length?this.applyFocusTo(this.visibleNonShadowItems.pop()):this.isAddItemVisible()&&this.focusAddItemButton():this.applyFocusTo(this.visibleShadowItems[n-1]):n===this.visibleShadowItems.length-1?this.isAddItemVisible()?this.focusAddItemButton():this.applyFocusTo(this.visibleItems.shift()):this.applyFocusTo(this.visibleShadowItems[n+1])}applyFocusTo(e){e&&(this.navigationItem=e,setTimeout(()=>{var t,o,s,i;(i=(s=(o=(t=e.shadowRoot)===null||t===void 0?void 0:t.querySelector("ix-dropdown-item"))===null||o===void 0?void 0:o.shadowRoot)===null||s===void 0?void 0:s.querySelector("button"))===null||i===void 0||i.focus()}))}focusAddItemButton(){var e,t;this.addItemButton&&((t=(e=this.addItemButton.shadowRoot)===null||e===void 0?void 0:e.querySelector("button"))===null||t===void 0||t.focus(),this.navigationItem=this.addItemElement)}filterItemsWithTypeahead(){var e,t;this.inputFilterText=(t=(e=this.inputElement)===null||e===void 0?void 0:e.value.trim())!==null&&t!==void 0?t:"",this.inputFilterText?this.items.forEach(o=>{var s;o.classList.remove("display-none"),!((s=o.label)===null||s===void 0)&&s.toLowerCase().includes(this.inputFilterText.toLowerCase())||o.classList.add("display-none")}):this.removeHiddenFromItems(),this.arrowFocusController&&(this.arrowFocusController.items=this.visibleNonShadowItems),this.isDropdownEmpty=this.isEveryDropdownItemHidden}removeHiddenFromItems(){this.items.forEach(e=>{e.classList.remove("display-none")})}clearInput(){this.inputElement&&(this.inputElement.value=""),this.inputFilterText=""}clear(){this.clearInput(),this.selectedLabels=[];let e=this.isSingleMode?"":[];this.value=e,this.emitValueChange(e),this.dropdownShow=!1}onInputBlur(e){if(this.ixBlur.emit(),this.touched=!0,this.editable||this.isSingleMode)return;let t=e.target;!this.dropdownShow&&this.mode!=="multiple"&&(t.value=this.selectedLabels.toString())}placeholderValue(){return this.disabled||this.readonly?"":this.editable?this.i18nPlaceholderEditable:this.i18nPlaceholder}isAddItemVisible(){return!this.itemExists(this.inputFilterText)&&this.editable&&this.inputFilterText}shouldDisplayAllChip(){return this.selectedItems.length===this.items.length&&this.collapseMultipleSelection}renderAllChip(){return l("ix-filter-chip",{disabled:this.disabled||this.readonly,ariaLabelCloseIconButton:this.i18nAllSelected,onCloseClick:e=>{e.preventDefault(),e.stopPropagation(),this.clear()}},`${this.i18nAllSelected} (${this.selectedItems.length})`)}renderChip(e){return l("ix-filter-chip",{disabled:this.disabled||this.readonly,key:e.value,onCloseClick:t=>{t.preventDefault(),t.stopPropagation(),this.itemClick(e.value)}},e.label)}onValidationChange({isInvalid:e,isInvalidByRequired:t,isValid:o,isInfo:s,isWarning:i}){this.isInvalid=e||t,this.isValid=o,this.isWarning=i,this.isInfo=s}async getAssociatedFormElement(){return this.formInternals.form}getNativeInputElement(){return this.inputElement?Promise.resolve(this.inputElement):Promise.reject(new Error("Input element not found"))}async focusInput(){let e=await this.getNativeInputElement();e&&e.focus()}isTouched(){return Promise.resolve(this.touched)}render(){var e,t,o,s;return l(S,{key:"e3d77369d07f0be332ab7fd89d7fb50824eda98a","aria-disabled":v(this.disabled),class:{disabled:this.disabled}},l("ix-field-wrapper",{key:"f62cee3ed30fc22ef5ef53946de9496576699501",required:this.required,label:this.label,helperText:this.helperText,invalidText:this.invalidText,infoText:this.infoText,warningText:this.warningText,validText:this.validText,showTextAsTooltip:this.showTextAsTooltip,isInvalid:this.isInvalid,isValid:this.isValid,isInfo:this.isInfo,isWarning:this.isWarning,controlRef:this.inputRef},l("div",{key:"d34ee64beafd5b4cd3e040312d480b07b2003276",class:{select:!0,disabled:this.disabled,readonly:this.readonly},ref:i=>{this.dropdownAnchorRef(i),this.editable||this.dropdownWrapperRef(i)}},l("div",{key:"f4a776d773572345e499410ed4493df6757e6797",class:"input-container"},l("div",{key:"166b816069512be7c25b36231af7e0857d720420",class:"chips"},this.isMultipleMode&&this.items.length!==0&&(this.shouldDisplayAllChip()?this.renderAllChip():(e=this.selectedItems)===null||e===void 0?void 0:e.map(i=>this.renderChip(i))),l("div",{key:"cdd9b95c6a356244e986a0fbd62a55f47b1b76fc",class:"trigger"},l("input",{key:"652dd3f92b77d996ec0918e2ee352d702ccdd4ff",autocomplete:"off","data-testid":"input",disabled:this.disabled,readOnly:this.readonly,required:this.required,type:"text",class:{"allow-clear":this.allowClear&&!!(!((t=this.selectedLabels)===null||t===void 0)&&t.length)},placeholder:this.placeholderValue(),value:(o=this.inputValue)!==null&&o!==void 0?o:"",ref:i=>{this.inputElement=i,this.inputRef(i)},onBlur:i=>this.onInputBlur(i),onFocus:()=>{this.navigationItem=void 0},onInput:()=>this.filterItemsWithTypeahead(),onKeyDown:i=>this.onKeyDown(i)}),this.allowClear&&!this.disabled&&!this.readonly&&(!((s=this.selectedLabels)===null||s===void 0)&&s.length||this.inputFilterText)?l("ix-icon-button",{key:"clear",class:"clear",icon:m,variant:"subtle-tertiary",oval:!0,size:"16",onClick:i=>{i.preventDefault(),i.stopPropagation(),this.clear()},"aria-label":this.ariaLabelClearIconButton}):null,this.disabled||this.readonly?null:l("ix-icon-button",{"data-select-dropdown":!0,key:"dropdown",class:{"dropdown-visible":this.dropdownShow},icon:this.dropdownShow?p:u,variant:"subtle-tertiary",ref:i=>{this.editable&&this.dropdownWrapperRef(i)},"aria-label":this.ariaLabelChevronDownIconButton})))))),l("ix-dropdown",{key:"37e2f2974a094afd980a8bc68c261c136a667dc7",ref:i=>this.dropdownElement=i,show:this.dropdownShow,closeBehavior:this.isMultipleMode?"outside":"both",class:{"display-none":this.disabled||this.readonly},anchor:this.dropdownAnchorRef.waitForCurrent(),trigger:this.dropdownWrapperRef.waitForCurrent(),onShowChanged:i=>this.dropdownVisibilityChanged(i),placement:"bottom-start",enableTopLayer:this.enableTopLayer,overwriteDropdownStyle:async()=>{var i,n;let r={},a=(n=(i=this.hostElement.shadowRoot)===null||i===void 0?void 0:i.querySelector(".select"))===null||n===void 0?void 0:n.getBoundingClientRect().width;return a&&(r.minWidth=`${a}px`),this.dropdownWidth&&(r.width=`min(${this.dropdownWidth}, 100%)`),this.dropdownMaxWidth&&(r.maxWidth=`min(${this.dropdownMaxWidth}, 100%)`),r}},l("div",{key:"97db72e168337ce557083361cd4b9c22ba1bec6d",class:{"select-list-header":!0,hidden:this.hideListHeader||this.isDropdownEmpty},title:this.i18nSelectListHeader,onClick:i=>i.preventDefault()},this.i18nSelectListHeader),l("slot",{key:"ceb168aedd28f921543332534391dd7f3976b087",onSlotchange:()=>{this.updateSelection()}}),l("div",{key:"458c6397c298d6a41ce34ac9cf4ac4e6902e8471",ref:i=>this.customItemsContainerElement=i}),this.isAddItemVisible()?l("ix-dropdown-item",{"data-testid":"add-item",icon:b,class:{"add-item":!0},label:this.inputFilterText,onItemClick:i=>{i.preventDefault(),i.stopPropagation(),this.emitAddItem(this.inputFilterText)},onFocus:()=>this.navigationItem=this.addItemElement,ref:i=>{this.addItemElement=i}}):null,this.isDropdownEmpty&&!this.editable?l("div",{class:"select-list-header"},this.i18nNoMatches):""))}static get formAssociated(){return!0}get hostElement(){return C(this)}static get watchers(){return{value:["watchValue"],dropdownShow:["watchDropdownShow"]}}};E([g("keydown",e=>e.dropdownShow)],c.prototype,"onKeyDown",null);E([w()],c.prototype,"onValidationChange",null);c.style=k;export{c as ix_select};
