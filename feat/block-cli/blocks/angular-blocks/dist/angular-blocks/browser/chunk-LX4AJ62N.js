import{a as w}from"./chunk-VD56CH4Q.js";import{a as m,b as u,c as b,d as f,e as v,f as T,h as g}from"./chunk-DT6OGIJY.js";import{b as h}from"./chunk-BBI5W3XS.js";import{b as d}from"./chunk-M4AZQB5Q.js";import{a as p}from"./chunk-355ZUK6P.js";import{a as y,c as s,d as k,e as L}from"./chunk-I5VBTOIN.js";import"./chunk-NWJ5J3BN.js";var A='.dialog{margin:0;padding:0;border:none;max-width:18.25rem;width:-moz-max-content;width:max-content;background-color:transparent;overflow-wrap:break-word;box-shadow:none;overflow:visible}.tooltip-container{display:block;position:relative;width:auto;height:-moz-fit-content;height:fit-content;background:var(--theme-tootlip--background);color:var(--theme-color-std-text);padding:0.375rem 0.75rem;box-shadow:var(--theme-shadow-4);border-radius:0.25rem}.content-wrapper{overflow:auto}.tooltip-title{display:flex}.tooltip-title ::slotted(ix-icon){margin:0.125rem 0.25rem 0.125rem 0}.arrow,.arrow::before{position:absolute;width:12px;height:12px;background:inherit}.arrow{visibility:hidden}.arrow::before{visibility:visible;content:"";transform:rotate(45deg);background-color:var(--theme-tootlip--background)}',c=-6,r=n=>n!==null?`${n}px`:"",P=0,j=(()=>{let n=class{constructor(t){y(this,t),this.interactive=!1,this.placement="top",this.showDelay=0,this.hideDelay=50,this.animationFrame=!1,this.visible=!1,this.instance=P++,this.dialogRef=p()}get arrowElement(){return this.hostElement.shadowRoot.querySelector(".arrow")}async showTooltip(t){if(this.clearTimeouts(),this.showTooltipTimeout||this.visibleFor===t)return;let e=await this.dialogRef.waitForCurrent();this.showTooltipTimeout=setTimeout(()=>{this.setAnchorElement(t),e.showPopover(),this.applyTooltipPosition(t,e),this.registerTooltipListener(e)},this.showDelay)}async hideTooltip(t=this.hideDelay){if(this.clearTimeouts(),this.hideTooltipTimeout||!this.visible)return;this.interactive&&t===50&&(t=150);let e=await this.dialogRef.waitForCurrent();this.hideTooltipTimeout=setTimeout(()=>{var i,o;this.setAnchorElement(),e.hidePopover(),(i=this.disposeAutoUpdate)===null||i===void 0||i.call(this),(o=this.disposeTooltipListener)===null||o===void 0||o.call(this)},t)}setAnchorElement(t){t?(this.visibleFor=t,this.visible=!0):(this.visibleFor=void 0,this.visible=!1)}computeArrowPosition({placement:t,middlewareData:e}){let{x:i,y:o}=e.arrow,a={top:"unset",right:"unset",bottom:"unset",left:"unset"};if(t.startsWith("top"))return Object.assign(Object.assign({},a),{left:r(i),bottom:r(c)});if(t.startsWith("right"))return Object.assign(Object.assign({},a),{left:r(c),top:r(o)});if(t.startsWith("bottom"))return Object.assign(Object.assign({},a),{left:r(i),top:r(c)});if(t.startsWith("left"))return Object.assign(Object.assign({},a),{right:r(c),top:r(o)})}async computeTooltipPosition(t,e){return g(t,e,{strategy:"fixed",placement:this.placement,middleware:[b(),u(12),T({element:this.arrowElement}),f({fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"end",padding:10}),v()]})}applyTooltipArrowPosition(t){let e=this.computeArrowPosition(t);Object.assign(this.arrowElement.style,e)}async applyTooltipPosition(t,e){if(t)return new Promise(i=>{var o;(o=this.disposeAutoUpdate)===null||o===void 0||o.call(this),this.disposeAutoUpdate=m(t,e,async()=>{var a;let l=await this.computeTooltipPosition(t,e);!((a=l.middlewareData.hide)===null||a===void 0)&&a.referenceHidden&&(this.hideTooltip(0),i(l)),l.middlewareData.arrow&&this.applyTooltipArrowPosition(l);let{x,y:E}=l;Object.assign(e.style,{left:r(x),top:r(E)}),i(l)},{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,animationFrame:this.animationFrame})})}async queryAnchorElements(){if(this.for)return Array.isArray(this.for)?this.resolveElements(this.for):this.resolveElements([this.for])}async resolveElements(t){let e=[];return await Promise.all(t.map(async i=>{if(typeof i=="string"){let o=await w(i,this.hostElement);o&&e.push(...o)}else i instanceof HTMLElement?e.push(i):i instanceof Promise&&e.push(await i)})),e}async registerTriggerListener(){var t;(t=this.disposeTriggerListener)===null||t===void 0||t.call(this);let e=await this.queryAnchorElements();if(!e)return;let i=[];e.forEach(o=>{i.push({element:o,eventType:"mouseenter",callback:()=>{this.showTooltip(o)}},{element:o,eventType:"mouseleave",callback:()=>{this.hideTooltip()}},{element:o,eventType:"focus",callback:()=>{this.showTooltip(o)}},{element:o,eventType:"focusout",callback:()=>{this.hideTooltip()}})}),this.disposeTriggerListener=h(i)}registerTooltipListener(t){var e;(e=this.disposeTooltipListener)===null||e===void 0||e.call(this),this.disposeTooltipListener=h([{element:t,eventType:"mouseenter",callback:()=>{this.interactive&&this.clearHideTimeout()}},{element:t,eventType:"focus",callback:()=>{this.interactive&&this.clearHideTimeout()}},{element:t,eventType:"mouseleave",callback:()=>{this.hideTooltip()}},{element:t,eventType:"focusout",callback:()=>{this.hideTooltip()}},{element:t,eventType:"click",callback:i=>{i.stopPropagation()}},{element:document,eventType:"keydown",callback:i=>{i.key==="Escape"&&this.hideTooltip()}}])}registerDomChangeListener(){let t=new MutationObserver(()=>{this.registerTriggerListener()});t.observe(document.body,{attributes:!0,attributeFilter:["data-ix-tooltip"],childList:!0,subtree:!0}),this.disposeDomChangeListener=()=>{t.disconnect()}}clearHideTimeout(){clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=void 0}clearShowTimeout(){clearTimeout(this.showTooltipTimeout),this.showTooltipTimeout=void 0}clearTimeouts(){this.clearHideTimeout(),this.clearShowTimeout()}componentWillLoad(){this.registerTriggerListener()}componentDidLoad(){this.registerDomChangeListener()}disconnectedCallback(){var t,e,i,o;this.clearTimeouts(),(t=this.disposeAutoUpdate)===null||t===void 0||t.call(this),(e=this.disposeTriggerListener)===null||e===void 0||e.call(this),(i=this.disposeTooltipListener)===null||i===void 0||i.call(this),(o=this.disposeDomChangeListener)===null||o===void 0||o.call(this)}handleTitleIconSlotChange(t){let e=t.target,i=d(e);for(let o of i)o.tagName.toLowerCase()==="ix-icon"&&(o.size="16")}render(){return s(k,{key:"682cc1f0cc62163a87113f6e1e803d220b5db716",role:"tooltip",class:{visible:this.visible}},s("dialog",{key:"c12e5107c68039d8689291d1771121e697223f1f",ref:this.dialogRef,id:"tooltip-"+this.instance,class:"dialog",popover:"manual",inert:!this.visible},s("div",{key:"6fe8c464e70442c3b629be576ddcf4984ee155a1",class:"tooltip-container"},s("div",{key:"b0cc67360a4988786796e565b08c76c90d91cb36",class:"content-wrapper"},s("div",{key:"5097e3b2b68bcd75e01285793294d60f5dac15db",class:"tooltip-title"},s("slot",{key:"f0b86340bf7e5163a8970ea6b4c17f9bc6631255",name:"title-icon",onSlotchange:t=>this.handleTitleIconSlotChange(t)}),s("ix-typography",{key:"44618c64116435d5032fa031c1503e11b5a12a94",format:"h5"},this.titleContent,s("slot",{key:"5646d3eefac1f32e6313cd76ffbc8296f575fc22",name:"title-content"}))),s("slot",{key:"78ba14bb163ad2e06a8e17e32b2e38a9a62bdcbc"}),s("div",{key:"bd9fdd5d2ecda93b71ad5a0609218d1a19bd303a",class:"arrow"})))))}get hostElement(){return L(this)}};return n.style=A,n})();export{j as ix_tooltip};
