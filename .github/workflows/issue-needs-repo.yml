name: needs reproduction labeling

on:
  issues:
    types: [labeled]

jobs:
  comment-workflow:
    if: ${{ github.repository == 'siemens/ix' }}
    runs-on: ubuntu-latest
    steps:
      # Useful if we try to also integrate other labels
      # - name: Find comments
      #   id: find_comments
      #   uses: actions-cool/issues-helper@v3
      #   with:
      #     actions: 'find-comments'
      #     token: ${{ secrets.GITHUB_TOKEN }}
      #     issue-number: ${{ github.event.issue.number }}
      #     comment-auth: 'github-actions[bot]'
      #     body-includes: 'ðŸ¤– Hello '

      # - uses: actions/github-script@v7
      #   id: filter-comment
      #   env:
      #     COMMENTS_RESULT: ${{ steps.find_comments.outputs.comments }}
      #   with:
      #     script: |
      #       const { COMMENTS_RESULT } = process.env;
      #       const comments = JSON.parse(COMMENTS_RESULT);

      #       if (comments.length === 1) {
      #         return comments[0].id;
      #       }

      #       return '';
      #     result-encoding: string

      - name: Jira Ticket created
        if: "contains(github.event.label.name, 'needs reproduction')"
        uses: actions-cool/issues-helper@v3
        with:
          actions: 'create-comment'
          token: ${{ secrets.GITHUB_TOKEN }}
          body: |
            Thanks for the issue! This issue has been labeled as `needs reproduction`.

            To help us assist you better, could you please provide a way for us to access the code (such as a GitHub repository or a StackBlitz link). Without a reliable code reproduction, it might be challenging for us to resolve the issue, and we may have to close it.
            Thank you for your understanding!
