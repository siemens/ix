/*
 * SPDX-FileCopyrightText: 2023 Siemens AG
 *
 * SPDX-License-Identifier: MIT
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

@use './common-variables' as vars;
@use '../button/button';
@use 'legacy/components/dropdown';
@use 'legacy/mixins/fonts' as legacy-fonts;
@use 'mixins/hover';
@use 'mixins/fonts';
@use 'mixins/input';
@use 'mixins/shadows';
@use 'mixins/shadow-dom/component';
@use 'mixins/text-truncation';

:host {
  display: block;
  position: relative;
  height: auto;

  @include component.ix-component;

  .reset-button {
    position: absolute;
    top: vars.$tiny-space;
    right: vars.$tiny-space;
  }

  .reset-button.hide-reset-button {
    display: none;
  }

  .input-container {
    &:not(.readonly):not(.disabled) {
      @include input.element-input('false');
    }

    &:not(.readonly):not(.disabled):hover {
      border-color: var(--theme-input--border-color--hover) !important;
      background-color: var(--theme-input--background--hover);
    }

    &:not(.readonly):not(.disabled).focus {
      outline: 1px solid var(--theme-color-focus-bdr);
      outline-offset: var(--theme-input--focus--outline-offset);
      border-color: var(--theme-input--border-color--focus) !important;
    }

    &.disabled {
      color: var(--theme-input--color--disabled);
      border-bottom: var(--theme-input--border-thickness, 1px) solid
        var(--theme-input--border-color-bottom--disabled);
    }

    &.readonly {
      @include input.element-input;
    }

    display: flex;
    height: auto;
    max-height: 3.75rem;
    padding: 1px vars.$large-space 1px 1.75rem !important;

    &.no-icon {
      padding-left: vars.$tiny-space;
    }
  }

  .token-container {
    flex-grow: 1;
    overflow: hidden;
  }

  .text-input {
    width: auto;
    height: 1.75rem;
    min-height: vars.$large-space;
    background: transparent;
    flex-grow: 1;
    box-shadow: none;

    @include text-truncation.ellipsis;
    @include legacy-fonts.text-default;

    &::placeholder {
      @include fonts.typography-label;
      color: var(--theme-color-soft-text);
    }

    &,
    &:hover,
    &:focus,
    &:focus-visible {
      border: none !important;
      outline: none !important;
    }

    &.hide-placeholder::placeholder {
      opacity: 0;
    }
  }

  .list-unstyled {
    display: flex;
    flex-wrap: wrap;
    height: 100%;
    overflow-y: auto;
  }

  ix-icon {
    position: absolute;
    top: vars.$small-space;
    left: vars.$small-space;
  }

  ix-filter-chip {
    margin-right: vars.$tiny-space;
  }

  .category-preview {
    display: flex;
    align-items: center;
    height: vars.$large-space;
    background-color: var(--theme-bg-3);
    border-top-left-radius: vars.$default-space;
    border-bottom-left-radius: vars.$default-space;
    padding: vars.$small-space;
    margin: 2px 0;
  }

  ul {
    height: 100%;
  }

  .list-unstyled > span:not(.category-preview),
  input {
    padding-inline-start: 0;
    padding-top: 2px;
    padding-bottom: 2px;
  }

  ix-dropdown {
    min-width: 10rem !important;

    .dropdown-item-container {
      display: flex;
      flex-direction: column;

      .dropdown-item {
        height: vars.$large-control-height;
        margin: vars.$tiny-space vars.$small-space;
        padding-inline: vars.$small-space;
        border: 1px solid transparent;
        border-radius: 100rem;
        width: auto;
        justify-content: flex-start;
        flex-grow: 1;

        @include legacy-fonts.text-default-single;
        @include text-truncation.ellipsis;
        @include hover.focus-visible {
          border-color: var(--theme-color-focus-bdr);
        }
      }

      .category-item {
        border-end-end-radius: 0;
        border-start-end-radius: 0;
      }

      .category-item-value {
        border-start-start-radius: 0;
        border-end-start-radius: 0;
      }
    }

    .btn-toggle-operator {
      width: 2rem;
      height: 2rem;
      margin-inline: vars.$small-space;
    }
  }

  .display-none {
    display: none;
  }
}
