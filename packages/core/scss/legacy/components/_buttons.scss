/*
 * SPDX-FileCopyrightText: 2023 Siemens AG
 *
 * SPDX-License-Identifier: MIT
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

@use './mixins/hover';
@use './mixins/text-truncation';
@use 'common-variables' as vars;

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: vars.$x-large-space;
  font-size: vars.$font-size-default;
  font-weight: vars.$font-weight-bold;
  transition: var(--theme-default-time);
  padding: 0 vars.$small-space;
  min-width: 5rem;
  gap: vars.$tiny-space;

  @include text-truncation.ellipsis;

  .glyph {
    margin-right: vars.$tiny-space;
    font-weight: vars.$font-weight-normal;
  }

  &:focus-visible,
  &.focus {
    box-shadow: none;
  }
}

$button-categories: (primary, secondary);

@mixin btn($name, $enable-border: true) {
  .btn-#{$name} {
    border-radius: var(--theme-btn--border-radius);

    @if $enable-border == false {
      --bs-btn-border-width: 0px;
      --bs-btn-active-border-color: none;
    }

    &,
    &.focus,
    &:focus-visible {
      background-color: var(--theme-btn-#{$name}--background);
      color: var(--theme-btn-#{$name}--color);

      --ix-button-color: var(--theme-btn-#{$name}--color);

      @if $enable-border {
        border-width: var(--theme-btn--border-thickness);
        border-color: var(--theme-btn-#{$name}--border-color);
        border-style: solid;
      } @else {
        border-color: transparent;
      }
    }

    @include hover.focus-visible {
      outline: 1px solid var(--theme-color-focus-bdr);
      outline-offset: var(--theme-btn--focus--outline-offset);
    }

    &.selected {
      background-color: var(--theme-color-ghost--selected);
      color: var(--theme-color-dynamic);
    }

    &.hover,
    &:hover {
      @if $enable-border {
        border-color: var(--theme-btn-#{$name}--border-color--hover);
      }

      background-color: var(--theme-btn-#{$name}--background--hover);
      color: var(--theme-btn-#{$name}--color--hover);
    }

    &.selected {
      &.hover,
      &:hover {
        background-color: var(--theme-color-ghost--selected-hover);
        color: var(--theme-color-dynamic);
      }
    }

    &:not(:disabled):not(.disabled):active,
    &:not(:disabled):not(.disabled).active,
    .show > &.dropdown-toggle {
      @if $enable-border {
        border-color: var(
          --theme-btn-#{$name}--border-color--active
        );
      }

     background-color: var(
        --theme-btn-#{$name}--background--active
      );
      color: var(--theme-btn-#{$name}--color--active);
    }

    &.selected {
      &:not(:disabled):not(.disabled):active,
      &:not(:disabled):not(.disabled).active,
      .show > &.dropdown-toggle {
        background-color: var(
          --theme-color-ghost--selected-active
        );

        color: var(--theme-color-dynamic);
      }
    }

    &.disabled,
    &:disabled {
      pointer-events: none;
      cursor: initial;

      @if $enable-border {
        border-color: var(--theme-btn-#{$name}--border-color--disabled);
      }

      background-color: var(--theme-btn-#{$name}--background--disabled);
      color: var(--theme-btn-#{$name}--color--disabled);
      opacity: 1;

      --ix-button-color: var(--theme-btn-#{$name}--color--disabled);
    }
  }
}

@each $category in $button-categories {
  @include btn($category);
  @include btn('outline-#{$category}');
  @include btn('invisible-#{$category}', false);
}

.btn-oval,
.btn-icon {
  min-width: vars.$x-large-space;
  width: vars.$x-large-space;

  .glyph {
    margin-right: 0;
  }
}

.btn-oval {
  border-radius: 6.25rem;
  width: vars.$default-control-height;
}

.btn-icon-xs,
.btn-icon-12 {
  height: vars.$default-space;
  width: vars.$default-space;
  min-width: vars.$default-space;
  min-height: vars.$default-space;
}

.btn-icon-s,
.btn-icon-16 {
  height: vars.$large-space;
  width: vars.$large-space;
  min-width: vars.$large-space;
  min-height: vars.$large-space;
}

.btn-icon-32 {
  height: vars.$x-large-space;
  width: vars.$x-large-space;
  min-width: vars.$x-large-space;
  min-height: vars.$x-large-space;
}
