import Admonition from '@theme/Admonition';
import Playground, {
  SourceCodePreview,
} from '@site/src/components/PlaygroundV2';
import StackblitzEmbedded from '@site/src/components/StackblitzEmbedded';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Props from '@site/docs/auto-generated/ix-validation-tooltip/props.md';

## Code

All components which are tagged via `form-ready` are usable inside a `form` without requiring manual integration.

### Label

Each `form-ready` component includes a `label` attribute that displays a label above the component.

```html
<ix-select label="Demo"></ix-select>
```

The `label` attribute is optional and can be left empty to display no label.

### Form layouting

#### Using custom layout

To align `form-ready` components in a complex form layout, you typically omit the `label` attribute and define the label
as an `ix-field-label` component.

You can follow the example here:

1. Define the `ix-text-field` component including an `id` attribute.

```html
<ix-text-field id="mytest"></ix-text-field>
```

2. Define an `ix-field-label` component with a `for` attribute to link the label to the `ix-text-field` component.

```html
<ix-field-label htmlFor="mytest">Test</ix-field-label>
```

3. Define an `ix-helper-text` component with a `for` attribute to link the helper text to the `ix-text-field` component.

```html
<ix-helper-text
  htmlFor="mytest"
  helperText="Helper text"
  invalidText="Error text"
  validText="Valid text"
  warningText="Warning text"
  infoText="Info text"
></ix-helper-text>
```

#### Using `ix-layout-form`

```html
<form>
  <ix-layout-grid>
    <ix-row>
      <ix-col size="2">
        <ix-field-label htmlFor="my-select-1">Example</ix-field-label>
      </ix-col>
      <ix-col>
        <ix-select id="my-select-1"></ix-select>
      </ix-col>
    </ix-row>
    <ix-row>
      <ix-col size="2">
        <ix-field-label htmlFor="my-select-2">Example</ix-field-label>
      </ix-col>
      <ix-col>
        <ix-text-field id="my-select-2"></ix-ix-text-field>
      </ix-col>
    </ix-row>
  </ix-layout-grid>
</form>
```

### Validation text

- **helperText** (optional): Text displayed below the field component to provide additional information.
- **infoText** (optional): Informational text for the field component.
- **warningText** (optional): Warning text for the field component.
- **invalidText** (optional): Error text for the field component.
- **validText** (optional): Valid text for the field component.
- **showTextAsTooltip** (optional): Determines whether to display helper, info, warning, error, and valid text as tooltips.

### Validation states

To change the validation representation, you have to apply the corresponding classes to the component.

- `ix-valid`: To show component as valid (Priority 1)
- `ix-info`: To show component as info (Priority 2)
- `ix-warning`: To show component as warning (Priority 3)
- `ix-invalid`: To show component as invalid (Priority 4)

These classes have different priority levels, which determining in which order the styling is applied to the component. (`1` is the lowest priority and `3` the highest)

e.g

```html
<ix-select class="ix-invalid ix-info"></ix-select>
```

Above example will result in displaying the component as `invalid`, because `invalid` has a higher priority than `info`.

<Admonition type="tip" icon="ðŸ’¡" title="You are using Angular?">
  When using Angular in combination with reactive forms, it is not necessary to
  manually apply the CSS classes `.ix-invalid` and `.ix-valid`. This will be
  done automatically through value accessors.
</Admonition>

### Suppress internal validation

To suppress the internal validation of a component, you have to provide the `novalidate` attribute to the [form element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#novalidate).

```html
<form novalidate>
  <!-- form content -->
</form>
```

### Example

<Tabs>
  <TabItem value="angular" label="Angular" default>

    <Admonition type="tip" icon="ðŸ’¡" title="Important">
      Please note that using the `required` attribute in an Angular application could result in unfavourabe behaviour displaying the field as invalid even if there was no user interaction yet.
      To avoid that it is suggested not to add the `required` attribute, but implement a custom validator for required fields instead (see `name` and `last-name` in the following code).
    </Admonition>

    <details>
      <summary>Just want to see the source code?</summary>
      <SourceCodePreview framework="angular" name="form-validation" examplesByName/>
    </details>

    <StackblitzEmbedded exampleName="form-validation" height="800px" framework="angular" />

  </TabItem>
  <TabItem value="react" label="React">
    <Admonition type="tip" icon="ðŸ’¡" title="Just an example">
      Using `react-form-hook` is just an example to demonstrate how validation could be done
      within React. You can use any other validation library or write your own validation logic.
    </Admonition>

    <details>
      <summary>Just want to see the source code?</summary>

      <SourceCodePreview framework="react" name="form-validation" examplesByName/>
    </details>
    <StackblitzEmbedded exampleName="form-validation" height="800px" framework="react" />

  </TabItem>
  <TabItem value="vue" label="Vue">
  <Admonition type="tip" icon="ðŸ’¡" title="Just an example">
      Using `@vuelidate/core` is just an example to demonstrate how validation could be done
      within Vue. You can use any other validation library or write your own validation logic.
    </Admonition>

    <details>
      <summary>Just want to see the source code?</summary>

      <SourceCodePreview framework="vue" name="form-validation" examplesByName/>
    </details>
    <StackblitzEmbedded exampleName="form-validation" height="800px" framework="vue" />

  </TabItem>
</Tabs>

### Legacy form validation (Deprecated)

<Admonition type="tip" icon="ðŸ’¡" title="Legacy documentation">
  Please note that the following documentation for a previous implementation is
  now deprecated and may be outdated.
</Admonition>

For the validation `@siemens/ix` use the validation concept of [bootstrap](https://getbootstrap.com/docs/5.2/forms/validation/).
The differences is that the validation tooltip is implemented as `@siemens/ix` [tooltip](#properties-tooltip)

In the following preview section you will find different implementation of a forms validation.

#### Preview

<Playground name="validation" height="20rem" examplesByName></Playground>

#### Properties (Tooltip)

#### Props

<Props />
