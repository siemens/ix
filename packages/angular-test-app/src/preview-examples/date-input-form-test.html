<!--
SPDX-FileCopyrightText: 2025 Siemens AG

SPDX-License-Identifier: MIT

This source code is licensed under the MIT license found in the
LICENSE file in the root directory of this source tree.
-->

<div style="padding: 1rem; font-size: 0.9rem">
  <h2 style="margin-bottom: 0.5rem">Date Input Validation Tests</h2>
  <div style="margin-bottom: 1rem; padding: 0.75rem; border-radius: 4px">
    <strong>Testing:</strong> Required field validation (red border) after blur. Format: YYYY-MM-DD
  </div>

  <button
    (click)="clearLogs()"
    style="padding: 0.5rem 1rem; margin-bottom: 1rem; border: none; border-radius: 4px; cursor: pointer; color: #333">
    Clear Logs
  </button>

  <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem">

    <!-- Scenario 1: Required (Standalone) -->
    <div style="border: 2px solid #c62828; border-radius: 8px; padding: 1rem;">
      <h4 style="margin: 0 0 0.5rem 0; color: #c62828">1Ô∏è‚É£ Required (Standalone)</h4>
      <ix-date-input
        #requiredInput
        name="req1"
        label="Required Date"
        [required]="true"
        (valueChange)="onValueChange($event, '1Ô∏è‚É£')"
        (focus)="onFocus('1Ô∏è‚É£')"
        (blur)="onBlur('1Ô∏è‚É£')"
      ></ix-date-input>
      <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap">
        <button
          type="button"
          (click)="setEmpty(requiredInput, '1Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #607d8b; color: white">
          Empty
        </button>
        <button
          type="button"
          (click)="setValid(requiredInput, '1Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #4caf50; color: white">
          Valid (Christmas)
        </button>
        <button
          type="button"
          (click)="setInvalid(requiredInput, '1Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #f44336; color: white">
          Invalid
        </button>
        <button
          type="button"
          (click)="triggerManualBlur(requiredInput, '1Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #ff5722; color: white">
          Manual Blur
        </button>
        <button
          type="button"
          (click)="clearInput(requiredInput, '1Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #9c27b0; color: white">
          Clear()
        </button>
      </div>
    </div>

    <!-- Scenario 2: Optional (Standalone) -->
    <div style="border: 2px solid #1976d2; border-radius: 8px; padding: 1rem;">
      <h4 style="margin: 0 0 0.5rem 0; color: #1976d2">2Ô∏è‚É£ Optional (Standalone)</h4>
      <ix-date-input
        #optionalInput
        name="opt1"
        label="Optional Date"
        [required]="false"
        (valueChange)="onValueChange($event, '2Ô∏è‚É£')"
        (focus)="onFocus('2Ô∏è‚É£')"
        (blur)="onBlur('2Ô∏è‚É£')"
      ></ix-date-input>
      <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap">
        <button
          type="button"
          (click)="setEmpty(optionalInput, '2Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #607d8b; color: white">
          Empty
        </button>
        <button
          type="button"
          (click)="setValid(optionalInput, '2Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #4caf50; color: white">
          Valid (Christmas)
        </button>
        <button
          type="button"
          (click)="setInvalid(optionalInput, '2Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #f44336; color: white">
          Invalid
        </button>
        <button
          type="button"
          (click)="triggerManualBlur(optionalInput, '2Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #ff5722; color: white">
          Manual Blur
        </button>
        <button
          type="button"
          (click)="clearInput(optionalInput, '2Ô∏è‚É£')"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #9c27b0; color: white">
          Clear()
        </button>
      </div>
    </div>

    <!-- Scenario 3: Form Context (Required) -->
    <div style="border: 2px solid #388e3c; border-radius: 8px; padding: 1rem;">
      <h4 style="margin: 0 0 0.5rem 0; color: #388e3c">3Ô∏è‚É£ Form Required</h4>
      <form [formGroup]="testForm" (ngSubmit)="onFormSubmit($event, '3Ô∏è‚É£')" novalidate>
        <ix-date-input
          #formRequiredInput
          name="form_req"
          label="Form Required Date"
          formControlName="requiredDate"
          (valueChange)="onValueChange($event, '3Ô∏è‚É£')"
          (focus)="onFocus('3Ô∏è‚É£')"
          (blur)="onBlur('3Ô∏è‚É£')"
        ></ix-date-input>
        <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap">
          <button
            type="button"
            (click)="setEmpty(formRequiredInput, '3Ô∏è‚É£')"
            style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #607d8b; color: white">
            Empty
          </button>
          <button
            type="button"
            (click)="setValid(formRequiredInput, '3Ô∏è‚É£')"
            style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #4caf50; color: white">
            Valid (Christmas)
          </button>
          <button
            type="button"
            (click)="setInvalid(formRequiredInput, '3Ô∏è‚É£')"
            style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #f44336; color: white">
            Invalid
          </button>
          <button
            type="button"
            (click)="triggerManualBlur(formRequiredInput, '3Ô∏è‚É£')"
            style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #ff5722; color: white">
            Manual Blur
          </button>
          <button
            type="button"
            (click)="clearInput(formRequiredInput, '3Ô∏è‚É£')"
            style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #9c27b0; color: white">
            Clear()
          </button>
          <button
            type="submit"
            style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #795548; color: white">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Date Range Example -->
  <div style="border: 2px solid #673ab7; border-radius: 8px; padding: 1rem; margin-bottom: 1rem">
    <h4 style="margin: 0 0 0.5rem 0; color: #673ab7">4Ô∏è‚É£ Date Range</h4>
    <div style="display: flex; gap: 1rem; align-items: end; flex-wrap: wrap">
      <div style="flex: 1; min-width: 200px">
        <ix-date-input
          #rangeStartInput
          name="range_start"
          label="Start Date"
          (valueChange)="onValueChange($event, '4Ô∏è‚É£ Start')"
          (focus)="onFocus('4Ô∏è‚É£ Start')"
          (blur)="onBlur('4Ô∏è‚É£ Start')"
        ></ix-date-input>
      </div>
      <div style="flex: 1; min-width: 200px">
        <ix-date-input
          #rangeEndInput
          name="range_end"
          label="End Date"
          (valueChange)="onValueChange($event, '4Ô∏è‚É£ End')"
          (focus)="onFocus('4Ô∏è‚É£ End')"
          (blur)="onBlur('4Ô∏è‚É£ End')"
        ></ix-date-input>
      </div>
      <div style="display: flex; gap: 0.5rem; flex-wrap: wrap">
        <button
          type="button"
          (click)="setDateRange()"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #673ab7; color: white">
          Set 2024 Range
        </button>
        <button
          type="button"
          (click)="setToday()"
          style="padding: 0.4rem 0.8rem; font-size: 0.85rem; border: none; border-radius: 4px; cursor: pointer; background-color: #ff9800; color: white">
          Set Today
        </button>
      </div>
    </div>
  </div>

  <!-- Event Logs -->
  <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem">
    <h4 style="margin: 0 0 0.5rem 0; color: #333">üìã Event Logs</h4>
    <div style="max-height: 300px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 4px; padding: 0.5rem; background-color: white; font-family: monospace; font-size: 0.85rem">
      <div *ngIf="logs.length === 0" style="color: #666; font-style: italic">
        No events yet. Interact with the date inputs above to see logs here.
      </div>
      <div *ngFor="let log of logs" [style.color]="getLogColor(log)" style="margin-bottom: 0.25rem">
        {{ log }}
      </div>
    </div>
  </div>
</div>
